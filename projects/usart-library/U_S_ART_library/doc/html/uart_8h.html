<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>U(S)ART Library: uart.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>uart.h File Reference</h1>A header file for core functionality of the U(S)ART library. <a href="#_details">More...</a>
<p>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;uart_guard.h&gt;</code><br>

<p>
<a href="uart_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#36335e1fbfc99169a1e8545f60cbcab7">TX_FULL_ERROR</a>&nbsp;&nbsp;&nbsp;_BV(1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A macro that defines a bitmask for the TX buffer full error.  <a href="#36335e1fbfc99169a1e8545f60cbcab7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#fafb2d0e26c6e225c0f1113427ec8d45">RX_FULL_ERROR</a>&nbsp;&nbsp;&nbsp;_BV(2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A macro that defines a bitmask for RX buffer full error.  <a href="#fafb2d0e26c6e225c0f1113427ec8d45"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#0b98128305671793e02158648b580115">UART_get_error</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the last error code(s) for given device.  <a href="#0b98128305671793e02158648b580115"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#f6abdc6eb873ba436f98fc2247a049a4">UART_set_speed</a> (uint8_t device, uint16_t UBRR_val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes UART library internals and sets UART speed.  <a href="#f6abdc6eb873ba436f98fc2247a049a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#b623f41db1c39f7c9fc60c17ea10a4db">UART_init_RX</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes receiver part of the UART library.  <a href="#b623f41db1c39f7c9fc60c17ea10a4db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#8a908344b767d6c55e37b442787cec7b">UART_init_TX</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes transmitter part of the UART library.  <a href="#8a908344b767d6c55e37b442787cec7b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#a1467e635689d761d1902298882fc0b6">UART_getchar</a> (uint8_t device, uint8_t *a_byte)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Receives one byte from UART.  <a href="#a1467e635689d761d1902298882fc0b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#4dab4dd9f475d9562d08f5c215600c12">UART_get</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Receives one byte from UART.  <a href="#4dab4dd9f475d9562d08f5c215600c12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#575e4474bf05ce81a140f45b3eda1b34">UART_clear_RX_buf</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears input buffer.  <a href="#575e4474bf05ce81a140f45b3eda1b34"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#1a0a3f8ce16d791c1de73e0932f030a9">UART_get_RX_len</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns numer of received bytes in the input buffer.  <a href="#1a0a3f8ce16d791c1de73e0932f030a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#a7c76e793d83a3ac3c0ee74ed635cd53">UART_putchar</a> (uint8_t device, uint8_t a_byte)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends one byte to UART.  <a href="#a7c76e793d83a3ac3c0ee74ed635cd53"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#1def7adf1f564d9bf7c947506721fa07">UART_put</a> (uint8_t device, uint8_t a_byte)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends one byte to UART.  <a href="#1def7adf1f564d9bf7c947506721fa07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#f6b508b2bf87b2f48e91c003a147cdd4">UART_clear_TX_buf</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears output buffer.  <a href="#f6b508b2bf87b2f48e91c003a147cdd4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#9006bf17eee3b005e9bb923a6df8024c">UART_get_TX_len</a> (uint8_t device)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of bytes waiting for transmission in the output buffer.  <a href="#9006bf17eee3b005e9bb923a6df8024c"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A header file for core functionality of the U(S)ART library. 
<p>
Requires <code>inttypes.h</code> and <code>io.h</code> headers (from avr-libc). <hr><h2>Define Documentation</h2>
<a class="anchor" name="fafb2d0e26c6e225c0f1113427ec8d45"></a><!-- doxytag: member="uart.h::RX_FULL_ERROR" ref="fafb2d0e26c6e225c0f1113427ec8d45" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define RX_FULL_ERROR&nbsp;&nbsp;&nbsp;_BV(2)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A macro that defines a bitmask for RX buffer full error. 
<p>
If any bits in this masks are set in the value returned by the <a class="el" href="uart_8h.html#0b98128305671793e02158648b580115">UART_get_error</a> function then transmission buffer is full and no new bytes will be received until next byte is fetched or buffer is pruned (<a class="el" href="uart_8h.html#575e4474bf05ce81a140f45b3eda1b34">UART_clear_RX_buf</a>).     </td>
  </tr>
</table>
<a class="anchor" name="36335e1fbfc99169a1e8545f60cbcab7"></a><!-- doxytag: member="uart.h::TX_FULL_ERROR" ref="36335e1fbfc99169a1e8545f60cbcab7" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TX_FULL_ERROR&nbsp;&nbsp;&nbsp;_BV(1)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A macro that defines a bitmask for the TX buffer full error. 
<p>
If any bits in this masks are set in the value returned by the <a class="el" href="uart_8h.html#0b98128305671793e02158648b580115">UART_get_error</a> function then transmission buffer is full and no new bytes will be accepted until next byte is transmitted or buffer is pruned <a class="el" href="uart_8h.html#f6b508b2bf87b2f48e91c003a147cdd4">UART_clear_TX_buf</a>.     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="575e4474bf05ce81a140f45b3eda1b34"></a><!-- doxytag: member="uart.h::UART_clear_RX_buf" ref="575e4474bf05ce81a140f45b3eda1b34" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UART_clear_RX_buf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clears input buffer. 
<p>
All data in input buffer is lost.<br>
 Input errors are also cleared.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to clear buffer. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="f6b508b2bf87b2f48e91c003a147cdd4"></a><!-- doxytag: member="uart.h::UART_clear_TX_buf" ref="f6b508b2bf87b2f48e91c003a147cdd4" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UART_clear_TX_buf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clears output buffer. 
<p>
After call all data in the output buffer is lost.<br>
 Output errors are also cleared.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to clear buffer. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="4dab4dd9f475d9562d08f5c215600c12"></a><!-- doxytag: member="uart.h::UART_get" ref="4dab4dd9f475d9562d08f5c215600c12" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UART_get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Receives one byte from UART. 
<p>
This function is provided to make easier usage of the standard IO module.<br>
 Current implementation uses UART_getchar and 1 byte buffer in the .noinit memory section<br>
 UART_get does not wait for data - if input buffer is emtpy it returns -1 and this means that standard IO functions will return immediately with error (eg. EOF).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to read from. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>received byte if success or -1 if there is no waiting data. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="0b98128305671793e02158648b580115"></a><!-- doxytag: member="uart.h::UART_get_error" ref="0b98128305671793e02158648b580115" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint8_t UART_get_error           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the last error code(s) for given device. 
<p>
This function returns error code which consists of bits which define UART errors. See: <a class="el" href="uart_8h.html#36335e1fbfc99169a1e8545f60cbcab7">TX_FULL_ERROR</a> and <a class="el" href="uart_8h.html#fafb2d0e26c6e225c0f1113427ec8d45">RX_FULL_ERROR</a><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the "asked" uart device (starts with 0). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The last error code. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="1a0a3f8ce16d791c1de73e0932f030a9"></a><!-- doxytag: member="uart.h::UART_get_RX_len" ref="1a0a3f8ce16d791c1de73e0932f030a9" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint8_t UART_get_RX_len           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns numer of received bytes in the input buffer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to get the queue length. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes in the input buffer. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="9006bf17eee3b005e9bb923a6df8024c"></a><!-- doxytag: member="uart.h::UART_get_TX_len" ref="9006bf17eee3b005e9bb923a6df8024c" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint8_t UART_get_TX_len           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the number of bytes waiting for transmission in the output buffer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to get the queue length. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes in the output buffer. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1467e635689d761d1902298882fc0b6"></a><!-- doxytag: member="uart.h::UART_getchar" ref="a1467e635689d761d1902298882fc0b6" args="(uint8_t device, uint8_t *a_byte)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint8_t UART_getchar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>device</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint8_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>a_byte</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Receives one byte from UART. 
<p>
The data receiving is driven by UART_RECV interrupt. Incoming data is placed into buffer.<br>
 If the input buffer is full then <a class="el" href="uart_8h.html#fafb2d0e26c6e225c0f1113427ec8d45">RX_FULL_ERROR</a> bit is set in value returned by the <a class="el" href="uart_8h.html#0b98128305671793e02158648b580115">UART_get_error</a> and next incoming bytes are discarded (lost). If there was <a class="el" href="uart_8h.html#fafb2d0e26c6e225c0f1113427ec8d45">RX_FULL_ERROR</a> error then next (in this case succesfull) function call will reset it.<br>
 This function will not wait for incoming data.<br>
 Retrieved data is removed from input buffer so there is no way to "unget".<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to read from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a_byte</em>&nbsp;</td><td>If there is any received byte then it will be placed into this address. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 if success or 0 if there is no waiting data. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="b623f41db1c39f7c9fc60c17ea10a4db"></a><!-- doxytag: member="uart.h::UART_init_RX" ref="b623f41db1c39f7c9fc60c17ea10a4db" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UART_init_RX           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes receiver part of the UART library. 
<p>
This function should be called after <a class="el" href="uart_8h.html#f6abdc6eb873ba436f98fc2247a049a4">UART_set_speed()</a>. It resets (existing data is removed) input buffer and clears input errors.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the initialized uart device (starts with 0). </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="8a908344b767d6c55e37b442787cec7b"></a><!-- doxytag: member="uart.h::UART_init_TX" ref="8a908344b767d6c55e37b442787cec7b" args="(uint8_t device)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UART_init_TX           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>device</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes transmitter part of the UART library. 
<p>
This function should be called after the <a class="el" href="uart_8h.html#f6abdc6eb873ba436f98fc2247a049a4">UART_set_speed</a>. As a side effect this function clears output errors. Existing bytes in TX buffer are discarded (no flushing is performed).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the initialized uart device (starts with 0). </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="1def7adf1f564d9bf7c947506721fa07"></a><!-- doxytag: member="uart.h::UART_put" ref="1def7adf1f564d9bf7c947506721fa07" args="(uint8_t device, uint8_t a_byte)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UART_put           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>device</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>a_byte</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends one byte to UART. 
<p>
This function is provided for make easier usage of the standard IO module. See <a class="el" href="index.html#example_io">Example of standard IO &amp; U(S)ART</a>. <br>
 Current implementation uses UART_putchar.<br>
 UART_put does not wait for free space when the output buffer is full - it returns -1 and this means that standard IO functions will return immediately with error (eg. EOF).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to write to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a_byte</em>&nbsp;</td><td>This value will be placed into output buffer. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if success or -1 if there is no space in the output buffer. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a7c76e793d83a3ac3c0ee74ed635cd53"></a><!-- doxytag: member="uart.h::UART_putchar" ref="a7c76e793d83a3ac3c0ee74ed635cd53" args="(uint8_t device, uint8_t a_byte)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint8_t UART_putchar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>device</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>a_byte</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends one byte to UART. 
<p>
The byte sending is acknowledged by UART_DATA interrupt.<br>
 If there is no pending data to send then outgoing byte is placed directly into UDR ootherwise into the TX buffer.<br>
 If the buffer is full then <a class="el" href="uart_8h.html#36335e1fbfc99169a1e8545f60cbcab7">TX_FULL_ERROR</a> bit is set in value returned by the <a class="el" href="uart_8h.html#0b98128305671793e02158648b580115">UART_get_error</a> function and no action is performed. If there was <a class="el" href="uart_8h.html#36335e1fbfc99169a1e8545f60cbcab7">TX_FULL_ERROR</a> error then next succesfull function call will reset it.<br>
 This function will not wait for free space in the output buffer.<br>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the uart device (starts with 0) to write to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a_byte</em>&nbsp;</td><td>This value will be placed into output buffer. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 if success or 0 if there is no space in output buffer. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="f6abdc6eb873ba436f98fc2247a049a4"></a><!-- doxytag: member="uart.h::UART_set_speed" ref="f6abdc6eb873ba436f98fc2247a049a4" args="(uint8_t device, uint16_t UBRR_val)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void UART_set_speed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint8_t&nbsp;</td>
          <td class="mdname" nowrap> <em>device</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint16_t&nbsp;</td>
          <td class="mdname" nowrap> <em>UBRR_val</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes UART library internals and sets UART speed. 
<p>
For non USART devices (eg. AT91S8515) only 8 LSB bits will be used from the UBRR_val parameter. This function should be called before UART_RX_init() and/or UART_TX_init(). Interrupts are not enabled (no sei() call) so remeber to do it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device</em>&nbsp;</td><td>The number of the initialized uart device (starts with 0). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>UBRR_val</em>&nbsp;</td><td>This value will be used to set UBRR register. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon May 29 22:03:40 2006 for U(S)ART Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
