/*
 * globals.c
 *
 * Created: 09-06-2011 18:29:05
 *  Author: limapapy
 */ 

#include "globals.h"
#include <avr/pgmspace.h>

clk_analog_t analog_clock={{0},{0,128,128},{255,204,153},{255,0,0},{0,0,128}};
timep_t time_clk;
rgb_t train[32];
unsigned char USART_WORD[MAX_SIZE_WORD];
unsigned int USART_WORD_INDEX;
MODES mode;
short int theta;
short int cont_encoder=0;
short int enable_send;
char clock_digits[8];
unsigned char clock_window[7][40];
const char tab_chars[11] PROGMEM="1234567890:";
const unsigned char char_patterns[11][7] PROGMEM=
{
{0x04,0x0C,0x04,0x04,0x04,0x04,0x0E},//1
{0x0E,0x11,0x01,0x02,0x04,0x08,0x1F},//2
{0x1F,0x02,0x04,0x02,0x01,0x11,0x0E},//3
{0x02,0x06,0x0A,0x12,0x1F,0x02,0x02},//4
{0x1F,0x10,0x1E,0x01,0x01,0x11,0x0E},//5
{0x06,0x08,0x10,0x1E,0x11,0x11,0x0E},//6
{0x1F,0x11,0x01,0x02,0x04,0x04,0x04},//7
{0x0E,0x11,0x11,0x0E,0x11,0x11,0x0E},//8
{0x0E,0x11,0x11,0x0F,0x01,0x02,0x0C},//9
{0x0E,0x11,0x13,0x15,0x19,0x11,0x0E},//0																																																																																																																																																																																											
{0x00,0x0C,0x0C,0x00,0x0C,0x0C,0x00}//:			
};	
/*HELP_MSG=0,
	SCLK_MSG,
	NSCLK_MSG,
	DISP_PIC_MSG,
	NDISP_PIC_MSG,
	MODE_MSG,
	NMODE_MSG,
	NUMBER_COLOR_MSG,
	NNUMBER_COLOR_MSG,
	POINTER_COLOR_MSG,
	NPOINTER_COLOR_MSG,
	PATTERN_MSG,
	NPATTERN_MSG*/
char message010[] PROGMEM={
	"Help: \r\nMode <smode>: Select the start Mode in smode\r\n"
};		
char message011[] PROGMEM={
"GCLK: Get clock time\r\n"
};	
char message012[] PROGMEM={
"SCLK <hhmmss> Set the clock\r\n"
};	
char message013[] PROGMEM={
	"NCLR <rrggbb> Set the color of the clock numbers\r\n"
};	
char message014[] PROGMEM={
	"PCLR <rrggbb> set the rgb color of the clock pointers \r\n"
};	
char message2[] PROGMEM={"Clock set\r\n"};					
char message3[] PROGMEM={"Clock not set\r\n"};					
char message4[] PROGMEM={"Display set\r\n"};					
char message5[] PROGMEM={"Display image not set\r\n"};					
char message6[] PROGMEM={"Mode set\r\n"};					
char message7[] PROGMEM={"Mode not set\r\n"};					
char message8[] PROGMEM={"Color of number set\r\n"};					
char message9[] PROGMEM={"Color of number not set\r\n"};					
char message10[] PROGMEM={"Color of pointer set\r\n"};					
char message11[] PROGMEM={"Color of pointer not  set\r\n"};					
char message12[] PROGMEM={"Pattern set\r\n"};					
char message13[] PROGMEM={"Pattern not set\r\n"};					
PGM_P messages[] PROGMEM ={
							(PGM_P)message010,
							(PGM_P)message011,
							(PGM_P)message012,
							(PGM_P)message013,
							(PGM_P)message014,
							(PGM_P)message2,
							(PGM_P)message3,
							(PGM_P)message4,
							(PGM_P)message5,
							(PGM_P)message6,
							(PGM_P)message7,
							(PGM_P)message8,
							(PGM_P)message9,
							(PGM_P)message10,
							(PGM_P)message11,
							(PGM_P)message12,
							(PGM_P)message13
};



char caract[185] PROGMEM={	//NUMEROS
					254,	130,	130,	130,	254,//0
					0,		0,		254,	0,		0,	//1
					158,	146,	146,	146,	242,//2
					130,	146,	146,	146,	254,//3
					240,	16,		16,		16,		254,//4
					242,	146,	146,	146,	158,//5
					254,	146,	146,	146,	158,//6
					128,	128,	128,	128,	254,//7
					254,	146,	146,	146,	254,//8
					242,	146,	146,	146,	254,//9
					
					//CARACTERES ESPECIAISS
					0,		0,		40,		0,		0,	//:

					//ALFABETO
					254,	136,	136,	136,	254,//A
					254,	146,	146,	146,	108,//B
					254,	130,	130,	130,	130,//C
					254,	130,	130,	130,	124,//D
					254,	146,	146,	130,	130,//E
					254,	144,	144,	128,	128,//F
					254,	130,	130,	146,	158,//G
					254,	16,		16,		16,		254,//H
					130,	130,	254,	130,	130,//I
					4,		2,		130,	252,	128,//J
					254,	16,		40,		68,		130,//K
					130,	254,	130,	2,		6,	//L
					254,	192,	48,		192,	254,//M
					254,	192,	56,		6,		254,//N
					124,	130,	130,	130,	124,//O
					130,	254,	138,	136,	112,//P
					248,	136,	158,	138,	250,//Q
					2,		254,	154,	148,	114,//R
					242,	146,	146,	146,	158,//S
					128,	128,	254,	128,	128,//T
					254,	2,		2,		2,		254,//U
					240,	24,		6,		24,		224,//V
					252,	2,		12,		2,		252,//W
					198,	40,		16,		40,		198,//X
					128,	98,		30,		98,		128,//Y
					206,	154,	178,	162,	230,//Z
					
				};

 rgb_t rgb_table[57] PROGMEM={
						{255,255,255},
						{0,0,0},
						{255,255,255},
						{255,0,0},
						{0,255,0},
						{0,0,255},
						{255,255,0},
						{255,0,255},
						{0,255,255},
						{128,0,0},
						{0,128,0},
						{0,0,128},
						{128,128,0},
						{128,0,128},
						{0,128,128},
						{192,192,192},
						{128,128,128},
						{153,153,255},
						{153,51,102},
						{255,255,204},
						{204,255,255},
						{102,0,102},
						{255,128,128},
						{0,102,204},
						{204,204,255},
						{0,0,128},
						{255,0,255},
						{255,255,0},
						{0,255,255},
						{128,0,128},
						{128,0,0},
						{0,128,128},
						{0,0,255},
						{0,204,255},
						{204,255,255},
						{204,255,204},
						{255,255,153},
						{153,204,255},
						{255,153,204},
						{204,153,255},
						{255,204,153},
						{51,102,255},
						{51,204,204},
						{153,204,0},
						{255,204,0},
						{255,153,0},
						{255,102,0},
						{102,102,153},
						{150,150,150},
						{0,51,102},
						{51,153,102},
						{0,51,0},
						{51,51,0},
						{153,51,0},
						{153,51,102},
						{51,51,153},
						{51,51,51}
};

const int cosine[360] PROGMEM={
	128, 128, 128, 128, 128, 128, 127, 127, 127, 126, 
	126, 126, 125, 125, 124, 124, 123, 122, 122, 121, 
	120, 119, 119, 118, 117, 116, 115, 114, 113, 112, 
	111, 110, 109, 107, 106, 105, 104, 102, 101, 99, 
	98, 97, 95, 94, 92, 91, 89, 87, 86, 84, 
	82, 81, 79, 77, 75, 73, 72, 70, 68, 66, 
	64, 62, 60, 58, 56, 54, 52, 50, 48, 46, 
	44, 42, 40, 37, 35, 33, 31, 29, 27, 24, 
	22, 20, 18, 16, 13, 11, 9, 7, 4, 2, 
	0, -2, -4, -7, -9, -11, -13, -16, -18, -20, 
	-22, -24, -27, -29, -31, -33, -35, -37, -40, -42, 
	-44, -46, -48, -50, -52, -54, -56, -58, -60, -62, 
	-64, -66, -68, -70, -72, -73, -75, -77, -79, -81, 
	-82, -84, -86, -87, -89, -91, -92, -94, -95, -97, 
	-98, -99, -101, -102, -104, -105, -106, -107, -109, -110, 
	-111, -112, -113, -114, -115, -116, -117, -118, -119, -119, 
	-120, -121, -122, -122, -123, -124, -124, -125, -125, -126, 
	-126, -126, -127, -127, -127, -128, -128, -128, -128, -128, 
	-128, -128, -128, -128, -128, -128, -127, -127, -127, -126, 
	-126, -126, -125, -125, -124, -124, -123, -122, -122, -121, 
	-120, -119, -119, -118, -117, -116, -115, -114, -113, -112, 
	-111, -110, -109, -107, -106, -105, -104, -102, -101, -99, 
	-98, -97, -95, -94, -92, -91, -89, -87, -86, -84, 
	-82, -81, -79, -77, -75, -73, -72, -70, -68, -66, 
	-64, -62, -60, -58, -56, -54, -52, -50, -48, -46, 
	-44, -42, -40, -37, -35, -33, -31, -29, -27, -24, 
	-22, -20, -18, -16, -13, -11, -9, -7, -4, -2, 
	-0, 2, 4, 7, 9, 11, 13, 16, 18, 20, 
	22, 24, 27, 29, 31, 33, 35, 37, 40, 42, 
	44, 46, 48, 50, 52, 54, 56, 58, 60, 62, 
	64, 66, 68, 70, 72, 73, 75, 77, 79, 81, 
	82, 84, 86, 87, 89, 91, 92, 94, 95, 97, 
	98, 99, 101, 102, 104, 105, 106, 107, 109, 110, 
	111, 112, 113, 114, 115, 116, 117, 118, 119, 119, 
	120, 121, 122, 122, 123, 124, 124, 125, 125, 126, 
	126, 126, 127, 127, 127, 128, 128, 128, 128, 128
	};

	short int HELDER_FRANCISCO_FERREIRA_LOBATO[5]={0};

const char posCOOR[91][32] PROGMEM = {
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,27,28,29,30,31},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,22,23,24,25,26,27,28,29,30,31},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31},
{1,2,3,4,5,6,7,8,9,10,11,12,13,14,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31},
{1,2,3,4,5,6,7,8,9,10,11,12,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31},
{1,2,3,4,5,6,7,8,9,10,11,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31},
{1,2,3,4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,30},
{1,2,3,4,5,6,7,8,9,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,26,27,28,29,30},
{1,2,3,4,5,6,7,8,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,23,24,25,26,27,28,29,30},
{1,2,3,4,5,6,7,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,22,23,24,25,26,27,28,29,30},
{1,2,3,4,5,6,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30},
{1,2,3,4,5,6,6,7,8,9,10,11,12,13,14,15,16,17,17,18,19,20,21,22,23,24,25,26,27,28,29,29},
{1,2,3,4,5,5,6,7,8,9,10,11,12,13,14,15,16,16,17,18,19,20,21,22,23,24,25,26,26,27,28,29},
{1,2,3,4,5,5,6,7,8,9,10,11,12,13,14,15,15,16,17,18,19,20,21,22,23,24,24,25,26,27,28,29},
{1,2,3,4,4,5,6,7,8,9,10,11,12,13,13,14,15,16,17,18,19,20,21,22,22,23,24,25,26,27,28,29},
{1,2,3,4,4,5,6,7,8,9,10,11,12,12,13,14,15,16,17,18,19,20,20,21,22,23,24,25,26,27,28,29},
{1,2,3,4,4,5,6,7,8,9,10,11,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,26,27,28},
{1,2,3,3,4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,21,22,23,24,24,25,26,27,28},
{1,2,3,3,4,5,6,7,8,9,10,10,11,12,13,14,15,16,16,17,18,19,20,21,22,23,23,24,25,26,27,28},
{1,2,3,3,4,5,6,7,8,9,9,10,11,12,13,14,15,15,16,17,18,19,20,21,21,22,23,24,25,26,27,27},
{1,2,3,3,4,5,6,7,8,8,9,10,11,12,13,14,14,15,16,17,18,19,20,20,21,22,23,24,25,25,26,27},
{1,2,3,3,4,5,6,7,8,8,9,10,11,12,13,13,14,15,16,17,18,18,19,20,21,22,23,23,24,25,26,27},
{1,2,2,3,4,5,6,7,7,8,9,10,11,12,12,13,14,15,16,17,17,18,19,20,21,22,22,23,24,25,26,27},
{1,2,2,3,4,5,6,7,7,8,9,10,11,11,12,13,14,15,16,16,17,18,19,20,20,21,22,23,24,25,25,26},
{1,2,2,3,4,5,6,6,7,8,9,10,11,11,12,13,14,15,15,16,17,18,19,19,20,21,22,23,23,24,25,26},
{1,2,2,3,4,5,6,6,7,8,9,10,10,11,12,13,14,14,15,16,17,18,18,19,20,21,22,22,23,24,25,26},
{1,2,2,3,4,5,6,6,7,8,9,9,10,11,12,13,13,14,15,16,17,17,18,19,20,20,21,22,23,24,24,25},
{1,2,2,3,4,5,5,6,7,8,9,9,10,11,12,12,13,14,15,16,16,17,18,19,19,20,21,22,23,23,24,25},
{1,2,2,3,4,5,5,6,7,8,8,9,10,11,11,12,13,14,15,15,16,17,18,18,19,20,21,21,22,23,24,25},
{1,2,2,3,4,5,5,6,7,8,8,9,10,11,11,12,13,14,14,15,16,17,17,18,19,20,20,21,22,23,23,24},
{1,1,2,3,4,4,5,6,7,7,8,9,10,10,11,12,13,13,14,15,16,16,17,18,19,19,20,21,22,22,23,24},
{1,1,2,3,4,4,5,6,7,7,8,9,10,10,11,12,12,13,14,15,15,16,17,18,18,19,20,20,21,22,23,23},
{1,1,2,3,4,4,5,6,6,7,8,9,9,10,11,12,12,13,14,14,15,16,17,17,18,19,19,20,21,22,22,23},
{1,1,2,3,4,4,5,6,6,7,8,8,9,10,11,11,12,13,13,14,15,16,16,17,18,18,19,20,21,21,22,23},
{1,1,2,3,3,4,5,6,6,7,8,8,9,10,10,11,12,13,13,14,15,15,16,17,17,18,19,19,20,21,22,22},
{1,1,2,3,3,4,5,5,6,7,8,8,9,10,10,11,12,12,13,14,14,15,16,16,17,18,18,19,20,20,21,22},
{1,1,2,3,3,4,5,5,6,7,7,8,9,9,10,11,11,12,13,13,14,15,15,16,17,17,18,19,19,20,21,21},
{1,1,2,3,3,4,5,5,6,7,7,8,9,9,10,10,11,12,12,13,14,14,15,16,16,17,18,18,19,20,20,21},
{1,1,2,3,3,4,4,5,6,6,7,8,8,9,10,10,11,12,12,13,13,14,15,15,16,17,17,18,19,19,20,21},
{1,1,2,3,3,4,4,5,6,6,7,8,8,9,9,10,11,11,12,13,13,14,14,15,16,16,17,18,18,19,20,20},
{1,1,2,2,3,4,4,5,6,6,7,7,8,9,9,10,10,11,12,12,13,14,14,15,15,16,17,17,18,18,19,20},
{1,1,2,2,3,4,4,5,5,6,7,7,8,8,9,10,10,11,11,12,13,13,14,14,15,16,16,17,17,18,19,19},
{1,1,2,2,3,4,4,5,5,6,6,7,8,8,9,9,10,11,11,12,12,13,14,14,15,15,16,16,17,18,18,19},
{1,1,2,2,3,3,4,5,5,6,6,7,7,8,9,9,10,10,11,11,12,13,13,14,14,15,15,16,17,17,18,18},
{1,1,2,2,3,3,4,4,5,6,6,7,7,8,8,9,10,10,11,11,12,12,13,13,14,15,15,16,16,17,17,18},
{1,1,2,2,3,3,4,4,5,5,6,7,7,8,8,9,9,10,10,11,11,12,13,13,14,14,15,15,16,16,17,17},
{1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,17},
{1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16},
{1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16},
{0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16},
{0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15},
{0,1,1,2,2,3,3,4,4,5,5,5,6,6,7,7,8,8,9,9,10,10,10,11,11,12,12,13,13,14,14,15},
{0,1,1,2,2,3,3,4,4,4,5,5,6,6,7,7,7,8,8,9,9,10,10,11,11,11,12,12,13,13,14,14},
{0,1,1,2,2,3,3,3,4,4,5,5,5,6,6,7,7,8,8,8,9,9,10,10,11,11,11,12,12,13,13,14},
{0,1,1,2,2,2,3,3,4,4,4,5,5,6,6,7,7,7,8,8,9,9,9,10,10,11,11,11,12,12,13,13},
{0,1,1,2,2,2,3,3,4,4,4,5,5,5,6,6,7,7,7,8,8,9,9,9,10,10,11,11,11,12,12,13},
{0,1,1,1,2,2,3,3,3,4,4,4,5,5,6,6,6,7,7,7,8,8,9,9,9,10,10,10,11,11,12,12},
{0,1,1,1,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,8,8,8,9,9,9,10,10,10,11,11,11},
{0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,8,8,8,9,9,9,10,10,10,11,11},
{0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,7,8,8,8,9,9,9,10,10,10},
{0,1,1,1,2,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,6,7,7,7,8,8,8,9,9,9,10,10},
{0,1,1,1,1,2,2,2,3,3,3,4,4,4,4,5,5,5,6,6,6,6,7,7,7,8,8,8,8,9,9,9},
{0,1,1,1,1,2,2,2,2,3,3,3,4,4,4,4,5,5,5,6,6,6,6,7,7,7,7,8,8,8,9,9},
{0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,8,8,8,8},
{0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,7,8},
{0,0,1,1,1,1,2,2,2,2,2,3,3,3,3,4,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7},
{0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,4,4,4,4,4,5,5,5,5,5,6,6,6,6,6,7},
{0,0,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4,5,5,5,5,5,6,6,6,6},
{0,0,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,5,5,5,5,5,5,6},
{0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5},
{0,0,0,1,1,1,1,1,1,1,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4},
{0,0,0,0,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4},
{0,0,0,0,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3},
{0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3},
{0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2},
{0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

