<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title></title>
</head>
<body>
<a href="themen.htm">Themen</a> / <a href="00idx.htm">Inhaltsliste</a>
/ <a href="../english/avrstud.htm">English</a>
<h2>ATMEL programmieren in C++ mit AVR Studio mit Plugin AVRGCC</h2>
<h3><a name=content></a> Content (automatic) </h3>
<ul>
<li><a href=#content>#content</a> :  Content (automatic) 
<li><a href=#warnung>#warnung</a> : Warnung
<li><a href=#install>#install</a> : Installation
<li><a href=#invoke>#invoke</a> : Aufruf des AVR-Studio
<li><a href=#prepare>#prepare</a> : Vorbereitung eines Projekts
<li><a href=#prepare>#prepare</a> : Arbeiten mit dem AVR Studio
<li><a href=#fehler>#fehler</a> : Fehler
<li><a href=#projects>#projects</a> : Projekte, die mit ATMEL AVR laufen
<li><a href=#abstuerze>#abstuerze</a> : Abst&uuml;rze
<li><a href=#seealso>#seealso</a> : Siehe auch
</ul>
Anleitung zur Benutzung des AVR Studio mit Plugin AVRGCC zur
Kompilierung von *.cpp-Dateien aus HOME\CC\...<br>
<h3><a name="warnung"></a>Warnung</h3>
Das Atmel AVR Studio astudio Version 4.21 Service Pack 4 Build 498
neigt zu h&auml;ufigen Abst&uuml;rzen. Eine Alternative w&auml;re
vielleicht IAR-Studio.<br>
Siehe <a href="#abstuerze">#abstuerze</a><br>
<h3><a name="install"></a>Installation</h3>
Herunterladen von <span style="font-style: italic;">gnuavr</span> von
(Datei: [WinAVR-20060125-install.exe]) von sf.net <a
 href="http://winavr.sourceforge.net">http://winavr.sourceforge.net</a><br>
Herunterladen von <span style="font-style: italic;">Atmel AVR Studio 4</span>
(Datei : [aStudio4.12SP1b462.exe]) von der
Atmel home page <a href="http://www.atmel.com">http://www.atmel.com</a><br>
Herunterladen von&nbsp; <span style="font-style: italic;">Ponyprog</span>
(Datei: PONYPROGV206F) von der Lancos homepage <a
 href="http://www.lancos.com/">
http://www.lancos.com/</a><br>
<br>
Installiere erst winavr, das installiert auch andere Tools wie z.B. sh,
grep, tar ...nach C:\WinAVR\bin. (Siehe auch <a
 href="../../winlin/winavr/00idx.htm">../../winlin/winavr/00idx.htm</a>)<br>
Die zugeh&ouml;rige Hilfe wird nach C:\WinAVR\doc installiert:<br>
<a href="file:///C:/WinAVR/doc/avr-libc/avr-libc-user-manual-1.4.3.pdf">C:\WinAVR\doc\avr-libc\avr-libc-user-manual-1.4.3.pdf</a>
- <br>
<a href="file:///C:/WinAVR/doc/gcc/cpp.pdf">C:\WinAVR\doc\gcc\cpp.pdf</a>
- <br>
<a href="file:///C:/WinAVR/doc/gcc/gcc.pdf">C:\WinAVR\doc\gcc\gcc.pdf</a>
- <br>
<a href="file:///C:/WinAVR/doc/simulavr-0.1.2.1/simulavr.pdf">C:\WinAVR\doc\simulavr-0.1.2.1\simulavr.pdf</a>
- <br>
<br>
Erst danach wird das Atmel AVR Studio installiert und gestartet.<br>
<h3><a name="invoke"></a>Aufruf des AVR-Studio</h3>
[Start] [Programs] [Atmel AVR Tools] [AVR STudio 4]<br>
<br>
<h3><a name="prepare"></a>Vorbereitung eines Projekts</h3>
[Project] [New Project]<br>
Project Type : AVR GCC<br>
Location : C:\HOME\CC\QQ\AVR<br>
[ ] Create initial file (Die Vorwahl wegnehmen! Es wird eine Datei aus
dem Verzeichnis C:\HOME\CC\QQ genommen)<br>
Project name: QQTRAFF<br>
-- Next &gt;&gt; --<br>
Select Platform AVR Simulator, Device AT90S2323 oder 8535, je f&uuml;r
welches Ziel entwickelt wird.<br>
<br>
Jetzt ist das AVR Studio mit einem leeren Projekt zu sehen.<br>
<code>&nbsp; QQTRAFF (default)<br>
&nbsp;&nbsp; +- Source Files<br>
&nbsp;&nbsp; +- Header Files<br>
&nbsp;&nbsp; +- External Dependencies<br>
&nbsp;&nbsp; +- Other Files</code><br>
<br>
Rechter Mausklick auf [Source Files],&nbsp; <span
 style="font-style: italic;">Add existing source files</span> und die
Datei qqtraff.cpp ausw&auml;hlen.<br>
<br>
[Project] [Configuration Options] <br>
Im linken Fenster <span style="font-style: italic;">Include Directories</span>
das Standard-Includeverzeichnis hinzuf&uuml;gen [Add...]
C:\HOME\CC\INCLUDE<br>
<br>
[Project] [Configuration Options] <br>
Im linken Fenster <span style="font-style: italic;">General</span>&nbsp;
Benutze eine externe Steuerdatei <span style="font-style: italic;">Makefile</span>.<br>
<br>
Den Makefile anpassen. Dazu einen
vorhandenen Makfile
herbeikopieren, z.B. von C:\HOME\CC\QQ\AVR\QQTSHAR\Makefile oder von
C:\HOME\CC\QQ\AVR\QQTSSER\Makefile und
editieren: Die alten Projektnamen und Hauptprogrammnamen ersetzen und
mehr Library-Dastein hinzuf&uuml;gen.<br>
<br>
<span style="font-style: italic;"></span><br>
[Project] [Configuration Options] <br>
Im linken Fenster <span style="font-style: italic;">General</span>&nbsp;
Benutze eine externe Steuerdatei <span style="font-style: italic;">Makefile</span>.<br>
<h3>Arbeiten mit dem AVR Studio</h3>
F7 - neues Kompilieren<br>
F12 - Bereinigen (Ende der t&auml;glichen Arbeit)<br>
<br>
Hardware-Beschreibung<br>
Die Hardware-Beschreibung erfolgt im Makefile:<br>
<br>
MCU_TARGET&nbsp;&nbsp;&nbsp;&nbsp; = atmega8535<br>
DEFS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
-DMCU_CLOCK=16000000<br>
<br>
<br>
<h3><a name="fehler"></a>Fehler</h3>
Probleme mit "Microsoft Visual C++ Runtime Library".<br>
(Dieses Problem tritt h&auml;ufig auf, deswegen den workspace von Zeit
zu Zeit sichern) Alle viertel Stunde.<br>
<br>
Probleme wenn das gleiche Verzeichnis ??? wird<br>
Meldung: Mapped files at 'C:\HOME\cc\qq\AVR\QQTSHAR\' to
'C:\HOME\cc\qq\AVR\QQTSHAR\'.<br>
<br>
Fehlermeldung: gcc plug-in: <span style="font-style: italic;">Could
not insert Project data intoProject tree<br>
</span>Ursache: Das default-Vezeichnis fehlt<br>
Abhilfe: Erzeugen mit <span style="font-style: italic;">md
C:\HOME\CC\QQ\AVR\QQTSHAR\default<br>
</span>Abhilfe: Erzeugen mit <span style="font-style: italic;">md
C:\HOME\CC\QQ\AVR\QQTSHAR\default\dep<br>
</span>Abhilfe: Den Debug-Start-Pfeil clicken und best&auml;tigen<span
 style="font-style: italic;"><br>
</span><span style="font-style: italic;"><br>
</span><span style="font-style: italic;"></span><br>
In die Quelldateien einf&uuml;gen: <span style="font-weight: bold;">#if
defined
AVR</span> bzw. <span style="font-weight: bold;">#if !defined
AVR</span> um prozessorabh&auml;ngige Teile (nicht) zu kompilieren.<br>
<h3><a name="projects"></a>Projekte, die mit ATMEL AVR laufen</h3>
<table border="1">
  <tbody>
    <tr>
      <th>Project</th>
      <th>Build OK</th>
      <th>Simulation i.O.<br>
      </th>
      <th>Auf Zielhardware i.O.</th>
      <td style="vertical-align: top;">Anmerkung<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">qqmain<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td>qqtraff</td>
      <td> 2006-05-21<br>
      </td>
      <td> Problem mit Dauer der Zeitschleifen<br>
      </td>
      <td>2006-10-07- Zeit &uuml;berpr&uuml;ft!<br>
      </td>
      <td style="vertical-align: top;">blinkt mit drei LED : Rot - Gelb
- Gr&uuml;n<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">qqtshar<br>
      </td>
      <td style="vertical-align: top;">2006-05-23<br>
      </td>
      <td style="vertical-align: top;">2006-09-30<br>
      </td>
      <td style="vertical-align: top;">Nicht erkennbar<br>
      </td>
      <td style="vertical-align: top;">K&ouml;nnte optimiert werden
dadurch, dass es in Assembler neu programmiert wird.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">qqtstraf<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;">Sollte blinken wie qqtraff,
benutzt aber tshar, um die Zeitscheiben zu berechnen.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">qqtsser<br>
      </td>
      <td style="vertical-align: top;">2006-08-08<br>
      </td>
      <td style="vertical-align: top;">2006-10-09<br>
      </td>
      <td style="vertical-align: top;">2006-10-09<br>
      </td>
      <td style="vertical-align: top;">Ein einfacher Dialog &uuml;ber
die serielle Schnittstelle. c zeigt die Variable "counter", t Zeigt
Uhrzeit, Fehler: Kann Uhrzeit nicht setzen.<br>
Siehe <a href="qq/qqtsser.htm">qq/qqtsser.htm</a><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">qqtsfloa<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h3><a name="abstuerze"></a>Abst&uuml;rze</h3>
AVR-Studio Version 4.1 Service Pack 4 Build 498 st&uuml;rzt ab.<br>
<br>
Wenn das Disassembler-Fenster mit dem Mausrad gerollt wird.<br>
<br>
<h3><a name="seealso"></a>Siehe auch</h3>
<a href="avr/ccall.htm">avr/ccall.htm</a> - Wie Unterpgrogramme
aufgerufen werden<br>
<a href="util/simbase.htm">util/simbase.htm</a> - Mein
Simulationsprogramm<br>
<a href="../../winlin/winavr/00idx.htm">../../winlin/winavr/00idx.htm</a>
- Die Hilfprogramme, die mit WinAVR mitkommen (shell, grep, tar ...)<br>
<br>
<br>
<br>
</body>
</html>
