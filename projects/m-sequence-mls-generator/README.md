# M-sequence (MLS) Generator

Uploaded by tkw954 on 2008-12-11 02:58:00 (rating 0 out of 5)

## Summary

Maximal length sequences (MLS or m-sequences) are useful for system identification and digital communication. For example if a MLS is used to excite the input to a linear time-invariant system, the system's impulse response can be determined from the cross correlation of the input and output. The impulse response can be useful in its own right or can be windowed to obtain a quasi-anechoic frequency response.


This code is written for a ATMEGA8, but should work with others. It outputs the MLS on pin 18 (PB4). A clock signal is output on pin 19 (PB5), transitioning high on each value. Pin 17 (PB3) is a synchronizing signal, going high for one sample at the start of each loop of the sequence.


The MLS is generated by a 16-bit linear feedback shift register. The "feedback" variable can be changed to other values to generate other sequences. See [http://www.ece.cmu.edu/~koopman/...](http://www.ece.cmu.edu/~koopman/lfsr/index.html) for other values.


The code is written for gcc with -O3 optimization and the loop runs in a minimum 19 clock cycles if the delay function is removed. The "NOP" lines must be tuned if you use a different compiler, to ensure that each branch of each "if" statement takes the same number of cycles. 


N\_delay can be used to change the loop's speed. It is currently set for a loop of 73 cycles or approx 219 kHz for a 16 MHz clock.


Please see <http://blog.nutaksas.com> for more.

## Compilers

- AVR32 GNU Toolchain

## Tags

- Complete code
- AVR32 GNU Toolchain
