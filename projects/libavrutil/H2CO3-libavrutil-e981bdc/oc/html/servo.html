<html>
	<head>
		<title>libavrutil - home</title>
	</head>
	<body>
		<div style="width: 60%; margin-left: auto; margin-right: auto; text-align: justify;">
			<ul style="list-style-type: none;">
				<li style="display: inline;"><a href="index.html">Home</a> |</li>
				<li style="display: inline;"><a href="building.html">Building</a> |</li>
				<li style="display: inline;"><a href="analog.html">Analog operations</a> |</li>
				<li style="display: inline;"><a href="binary.html">Binary operations</a> |</li>
				<li style="display: inline;"><a href="delay.html">Delays</a> |</li>
				<li style="display: inline;"><a href="interrupt.html">Interrupts</a> |</li>
				<li style="display: inline;"><a href="sound.html">Sound</a> |</li>
				<li style="display: inline;"><a href="#">Servos</a> |</li>
				<li style="display: inline;"><a href="usart.html">Serial port</a> |</li>
				<li style="display: inline;"><a href="pulse.html">Pulses</a> |</li>
				<li style="display: inline;"><a href="shift.html">Shift registers</a></li>
			</ul>
			<h2>libavrutil - Servos</h2>
			<hr />
			<p>Two servos can be driven by libavrutil, on the pins connected to timer 1 channel A and B. The servo routines need the floating point library from libc, so using the following functions will result in a bigger compiled code size (it was roughly 2kB in my case).</p>
			<p><strong><tt>void avr_servo_init()</tt></strong>: Initializes the servo driver system by configuring timer 1 appropriately. Must be called before any other avr_servo_*() function.</p>
			<p><strong><tt>void avr_servo_attach(uint8_t timer)</tt></strong>: starts servo control on the specified timer (must be either TIMER1A or TIMER1B). Initially sets the servo position to center. If an invalid timer is specified, does nothing.</p>
			<p><strong><tt>void avr_servo_detach(uint8_t timer)</tt></strong>: stops servo control on the specified timer (must be either TIMER1A or TIMER1B). If an invalid timer is specified, does nothing.</p>
			<p><strong><tt>void avr_servo_set_pos(uint8_t timer, uint16_t position)</tt></strong>: sets the position of the servo on the specified timer to <tt>position</tt>, which has to be in the range 0 (left) to 1023 (right). Also use the <tt>AVR_SERVO_LEFT</tt>, <tt>AVR_SERVO_RIGHT</tt> and <tt>AVR_SERVO_CENTER</tt> macros for better readability. If an invalid timer is specified, does nothing.</p>
			<p><strong><tt>uint16_t avr_servo_get_pos(uint8_t timer)</tt></strong>: Gets the position of the servo attached to the timer channel <tt>timer</tt> in the range 0...1023 (see above). If an invalid timer is specified, returns 0. If a servo is not attached to the channel currently, the returned result is invalid.</p>
		</div>
	</body>
</html>

