<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>01 Mechatronics Avr Library: Coding and naming Rules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">01 Mechatronics AVR Library</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="code_rules">Coding and naming Rules </a></h1><dl class="user"><dt><b>Naming Conventions</b></dt><dd></dd></dl>
<p>The naming conventions adopted by zoAvrLib are a result of several years of experience. The aim is to exploit auto-complete features provided by IDEs in order to reduce coding time and provide extended ease of use to the zoAvrLib user. With auto-complete the user can write a part of a function/variable etc and then press Ctrl+Space on the keyboard to invoke the auto-complete feature in the IDE.</p>
<ul>
<li>Filenames in zoAvrLib are always preceded by the lowercase letters zo (which stand for zero-one Mechatronics).Camel-case punctuation is used. Ie each new word in the filename starts with a capital letter. So, for example, the driver files for tha Analog to Digital Converter AVR submodule are named <a class="el" href="zo_adc_8h.html" title="Analog to digital converter peripheral function library.">zoAdc.h</a> and zoAdc.c.<br/>
</li>
<li>Library functions are preceded with the associated filename and use camel-case. So, for example, a library function that is related to the ADC is named ie <a class="el" href="group__zo_adc.html#ga96c9aba97513e621cbe5b818a1b8781b" title="Reads the voltage present at the specified ADC channel.">zoAdcRead()</a>. <br/>
</li>
<li>Local variables follow camel-case punctuation, starting with a lowercase letter. <br/>
</li>
<li>Global variables follow camel-case punctuation, starting with an uppercase letter. <br/>
</li>
<li>Library types and defines are written with capital letters and words in a name are distinguished by an underscore. The associated library file always proceeds the 'define' or 'typedef' name. For example an enumeration type containing all ADC channels is named ZO_ADC_CHANNEL. <br/>
</li>
<li>Enumeration members are written with capital letters and words in a name are distinguished by an underscore. The enumeration name is always the first part of the member name. For example the ADC channel 0 is a member of the enumeration ZO_ADC_CHANNEL and it's name is ZO_ADC_CHANNEL_0.<br/>
</li>
<li>Structure and union members are written using camel-case punctuation, starting with a lowercase letter.<br/>
</li>
<li>Library Internal functions and variables follow camel-case punctuation and are declared static inside the .c files.<br/>
</li>
</ul>
<dl class="user"><dt><b>Coding Style</b></dt><dd></dd></dl>
<ul>
<li>Driver initialization functions: A prototype of such functions is presented:<br/>
 <div class="fragment"><pre class="fragment"> <span class="keywordtype">void</span> zoDriverNameInit(<span class="keywordtype">void</span>); 
</pre></div> The driver initialization functions do not require any arguments, neither they return a value. Default initialization values are used to enhance ease of use of the driver libraries. For example <a class="el" href="group__zo_uart.html#ga126ca20da0fa20fba3e26235017aa6b9" title="Initializes the USART0 peripheral, byte storage etc. Always call this function prior...">zoUartInit()</a>; initializes the uart peripheral to a baud rate of 115200, 8 data bits, no parity, 1 stop bit. The default initialization values for any peripheral are always defined in the associated .h file. Each library has always the necessary functions to configure the MCU peripheral at full. These functions are designed to be called after the init() function.<br/>
</li>
</ul>
<ul>
<li>Driver functions: When there is a possibility of the function failing, the return value of this function is always a Boolean indicating success. In this way it is easy to check the success of the function call like the example below:<br/>
 <div class="fragment"><pre class="fragment">If(!<a class="code" href="group__zo_uart.html#gafb955160c9ba50ac40f2877acadeb07e" title="Sends a byte over uart. The byte is first put in the transmit buffer. The uart transmit...">zoUartPutChar</a>(<span class="charliteral">&#39;a&#39;</span>))
    handleError();
</pre></div></li>
</ul>
<dl class="user"><dt><b>Error Handling Scheme</b></dt><dd></dd></dl>
<ul>
<li><a class="el" href="struct_z_o___e_r_r_o_r.html" title="Error buffer type.">ZO_ERROR</a> type: The zoAvrLib includes functionality for a circular, ISR-protected error buffer. This type is always used to store errors that may happen during driver function execution. Typically each library file will have an associated <a class="el" href="struct_z_o___e_r_r_o_r.html" title="Error buffer type.">ZO_ERROR</a> type global variable declared. Ie for the uart the error buffer is: <br/>
 <div class="fragment"><pre class="fragment"><span class="keyword">extern</span> <a class="code" href="struct_z_o___e_r_r_o_r.html" title="Error buffer type.">ZO_ERROR</a> zoUartError;
</pre></div> The error handling tactic is described in the pseudo-code below: <div class="fragment"><pre class="fragment">If(!<a class="code" href="group__zo_uart.html#gafb955160c9ba50ac40f2877acadeb07e" title="Sends a byte over uart. The byte is first put in the transmit buffer. The uart transmit...">zoUartPutChar</a>(<span class="charliteral">&#39;a&#39;</span>))
{
    <span class="keywordflow">if</span>( <a class="code" href="group__zo_error.html#gafbe72b7d73146fe8a4e2082d0d51c6b8" title="Gets the &amp;#39;oldest&amp;#39; error code stored in the error buffer.">zoErrorGet</a>(&amp;zoUartError) == <a class="code" href="group__zo_uart.html#gad80176f0360b6e3a83ca741f080330b0">ZO_UART_ERROR_TX_TIMEOUT</a>)
        doSomething();
}
</pre></div></li>
</ul>
<ul>
<li>User file recommended error handling: The users are advised to keep the zoAvrLib error handling scheme in their projects. If a user file is closely related to a zoAvrLib file then there is the possibility to use the existing error buffer (to save on MCU memory) , like this: <div class="fragment"><pre class="fragment"><span class="comment">//file: MyUartProtocol.h</span>

<span class="preprocessor">#include &quot;<a class="code" href="zo_uart_8h.html" title="Uart 0 function library.">zoUart.h</a>&quot;</span>

<span class="comment">//first user defined error value is greater than any zoUart error define</span>
<span class="preprocessor">#define MY_UART_PROTOCOL_ERROR_1    10  </span>
<span class="preprocessor"></span><span class="preprocessor">#define MY_UART_PROTOCOL_ERROR_2    11</span>
<span class="preprocessor"></span>
<a class="code" href="struct_z_o___e_r_r_o_r.html" title="Error buffer type.">ZO_ERROR</a> *MyUartProtocolError = zoUartError;

<span class="comment">//file: MyUartProtocol.c</span>

<span class="preprocessor">#include &quot;MyUartProtocol.h&quot;</span>

<span class="keywordtype">bool</span> MyUartProtocolMyFunction(<span class="keywordtype">void</span>)
{

    doSomeStuff();

    If( protocolErrorIsPresent() )
    {
        <a class="code" href="group__zo_error.html#ga9f86f4bc1e454eed4be55c523ba161fe" title="Puts an error code in the error buffer.">zoErrorPut</a>(MyUartProtocolError, MY_UART_PROTOCOL_ERROR_1);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

<span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></li>
</ul>
<p>The main advantage of the zoAvrLib error handling scheme is that it provides a centralized handling of errors which is often crucial, especially for large projects. </p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Mar 22 16:32:12 2010 for 01 Mechatronics Avr Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
