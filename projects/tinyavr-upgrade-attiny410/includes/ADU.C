//*****************************************************************************
//
//	ADU
//
//*****************************************************************************
#include <iotiny10.h>

#pragma interrupt_handler adu_int:iv_ADC

unsigned char uc_aduwert;

//*****************************************************************************
//	ADU - Init
//  Input:	-
//	Output:	-
//*****************************************************************************
void adu_init(void)
{
//    SREG &= 0x7F;
   	ADMUX  = 0;
	ADCSRB = 0x00;  //Triggersource
	ADCSRA = 0x84;  //Teiler 16
//	SREG  |= 0x80;
}


//*****************************************************************************
//	ADU - Interrupt conversion complete
//  Input:	-
//	Output:	-
//*****************************************************************************
void adu_int(void)
{
   uc_aduwert = ADC;
   ADCSRA |= 0xC0;          //ADC neustarten
}


//*****************************************************************************
//	ADU - Wert holen
//  Input:	-
//	Output:	-
//*****************************************************************************
unsigned char adu_Sourcepegel(void)
{
   return(uc_aduwert);
}


//*****************************************************************************
//	ADU - starten
//  Input:	Kanal 0..3
//	Output:	-
//*****************************************************************************
void adu_Start(unsigned char uc_kanal)
{
   ADMUX = uc_kanal;	//Start
   ADCSRA = 0x94;
   ADCSRA = 0xCC;
}

		  
