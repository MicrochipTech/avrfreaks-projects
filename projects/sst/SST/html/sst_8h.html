<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SST: sst.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>sst.h File Reference</h1>A header file for core functionality of the SST. <a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="bool_8h.html">bool.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="sst__intern_8h.html">sst_intern.h</a>&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#8ecbe96126d2ec996db6665872b1e5e7">SST_EVENTQ_DEFINE</a>(_name_, _size_)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This macro is used to define a SST event queue object of a name <em>_name_</em> which is capable to keep <em>_size_</em> number of SST events.  <a href="#8ecbe96126d2ec996db6665872b1e5e7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#27923baebde1307c6486e8b481b9c61d">SST_MIN_TASK_PRIO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The lowest priority of a user task.  <a href="#27923baebde1307c6486e8b481b9c61d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#b639c7ae06c071c6534704ed270e7353">SST_IS_VALID_TASK</a>(_task_id_)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tests if the <em>_task_id_</em> is a valid task ID.  <a href="#b639c7ae06c071c6534704ed270e7353"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#b45b5d20c0797e108b04c8da08dcbd54">SST_Run</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A macro with initializes and starts SST scheduler.  <a href="#b45b5d20c0797e108b04c8da08dcbd54"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#7ac1de3cc0c3055bf75044221edc9c20">SST_Wait_Busy_While</a>(_cond_)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A macro which performs busy wait until <em>_cond_</em> becomes true.  <a href="#7ac1de3cc0c3055bf75044221edc9c20"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#573abf104045f1163f028bc02f445ba1">SST_CreateTask</a> (<a class="el" href="sst__base__def_8h.html#24d4221cdd204d79e5229dfa493e0159">CPU_Base_T</a> prio, void(*task)(<a class="el" href="sst__event_8h.html#fe74032b6d1729f1f9135a495c1d5cc3">SST_Event_T</a>), SST_EventQ_T *ev_queue)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new SST task.  <a href="#573abf104045f1163f028bc02f445ba1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#4f8fd4af0f0cb0e90e17c8fa1b3f8470">SST_PostEvent</a> (<a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a> id, <a class="el" href="sst__event_8h.html#2939852a573c268f48f6e2c96661bb33">SST_Signal_T</a> sig, <a class="el" href="sst__event_8h.html#ffbb29bec13bac6dc2f1d63fc41ed290">SST_Param_T</a> par)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends an avent to the SST task.  <a href="#4f8fd4af0f0cb0e90e17c8fa1b3f8470"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#a7c965b5658a7cb09c992c57ad30e640">SST_SetSignalMask</a> (<a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a> id, <a class="el" href="sst__event_8h.html#2939852a573c268f48f6e2c96661bb33">SST_Signal_T</a> signal_mask)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines signal mask for given task.  <a href="#a7c965b5658a7cb09c992c57ad30e640"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#72726c8678b00d7f75771594c6a59b13">SST_Start</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A user supplied callback used for initialization.  <a href="#72726c8678b00d7f75771594c6a59b13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst_8h.html#3972841e709c07f625043a17d3cc5d25">SST_OnIdle</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A user supplied callback used for signaling the scheduler idle time.  <a href="#3972841e709c07f625043a17d3cc5d25"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A header file for core functionality of the SST. 
<p>
Requires <code><a class="el" href="bool_8h.html">bool.h</a></code> (user supplied) and <code><a class="el" href="sst__intern_8h.html">sst_intern.h</a></code> (from sst folder) headers. <hr><h2>Define Documentation</h2>
<a class="anchor" name="8ecbe96126d2ec996db6665872b1e5e7"></a><!-- doxytag: member="sst.h::SST_EVENTQ_DEFINE" ref="8ecbe96126d2ec996db6665872b1e5e7" args="(_name_, _size_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SST_EVENTQ_DEFINE          </td>
          <td>(</td>
          <td class="paramtype">_name_,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_size_&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This macro is used to define a SST event queue object of a name <em>_name_</em> which is capable to keep <em>_size_</em> number of SST events. 
<p>
This macro declares event queue object which is used internally by SST API and this object should be used only as a parameter to <a class="el" href="sst_8h.html#573abf104045f1163f028bc02f445ba1">SST_CreateTask</a> function.<br>
 This macro will be available only when <a class="el" href="sst__base__def_8h.html#91b4bef2cc2f07f610a99c275134b3e6">SST_MAX_EV_QUEUE_LEN</a> is defined to 0.<br>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>_name_</em>&nbsp;</td><td>- name of the created event queue object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>_size_</em>&nbsp;</td><td>- max number of timed tasks associated with ticker object </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="b639c7ae06c071c6534704ed270e7353"></a><!-- doxytag: member="sst.h::SST_IS_VALID_TASK" ref="b639c7ae06c071c6534704ed270e7353" args="(_task_id_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SST_IS_VALID_TASK          </td>
          <td>(</td>
          <td class="paramtype">_task_id_&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tests if the <em>_task_id_</em> is a valid task ID. 
<p>
User can use this macro to test if task ID returned by <a class="el" href="sst_8h.html#573abf104045f1163f028bc02f445ba1">SST_CreateTask</a> is valid and if task was cucessfully created. 
</div>
</div><p>
<a class="anchor" name="27923baebde1307c6486e8b481b9c61d"></a><!-- doxytag: member="sst.h::SST_MIN_TASK_PRIO" ref="27923baebde1307c6486e8b481b9c61d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SST_MIN_TASK_PRIO          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The lowest priority of a user task. 
<p>
User tasks should have priority equal to or greather than value of this macro. 
</div>
</div><p>
<a class="anchor" name="b45b5d20c0797e108b04c8da08dcbd54"></a><!-- doxytag: member="sst.h::SST_Run" ref="b45b5d20c0797e108b04c8da08dcbd54" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SST_Run          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A macro with initializes and starts SST scheduler. 
<p>
This the main entry point for the SST functionality. In fact it can be the only content of the <code>main</code> function.<br>
 It is important to not enable interrupts before using this macro. The whole inititialization (including interrupts) should placed in the user supplied function <a class="el" href="sst_8h.html#72726c8678b00d7f75771594c6a59b13">SST_Start</a> 
</div>
</div><p>
<a class="anchor" name="7ac1de3cc0c3055bf75044221edc9c20"></a><!-- doxytag: member="sst.h::SST_Wait_Busy_While" ref="7ac1de3cc0c3055bf75044221edc9c20" args="(_cond_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SST_Wait_Busy_While          </td>
          <td>(</td>
          <td class="paramtype">_cond_&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A macro which performs busy wait until <em>_cond_</em> becomes true. 
<p>
Waiting is performed by calling user callback function <a class="el" href="sst_8h.html#3972841e709c07f625043a17d3cc5d25">SST_OnIdle</a>. It means that <em>_cond_</em> evaluation will be executed <b>only</b> if <a class="el" href="sst_8h.html#3972841e709c07f625043a17d3cc5d25">SST_OnIdle</a> ends.<br>
 Typical usage is to wait for IO event (which generates interrupt), in such case the <a class="el" href="sst_8h.html#3972841e709c07f625043a17d3cc5d25">SST_OnIdle</a> will return immediately and <em>_cond_</em> can be reevaluated. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="573abf104045f1163f028bc02f445ba1"></a><!-- doxytag: member="sst.h::SST_CreateTask" ref="573abf104045f1163f028bc02f445ba1" args="(CPU_Base_T prio, void(*task)(SST_Event_T), SST_EventQ_T *ev_queue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a> SST_CreateTask           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sst__base__def_8h.html#24d4221cdd204d79e5229dfa493e0159">CPU_Base_T</a>&nbsp;</td>
          <td class="paramname"> <em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="sst__event_8h.html#fe74032b6d1729f1f9135a495c1d5cc3">SST_Event_T</a>)&nbsp;</td>
          <td class="paramname"> <em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SST_EventQ_T *&nbsp;</td>
          <td class="paramname"> <em>ev_queue</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new SST task. 
<p>
User can use <a class="el" href="sst_8h.html#b639c7ae06c071c6534704ed270e7353">SST_IS_VALID_TASK</a> macro to test result of this function to detect if task creation was sucessfull.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prio</em>&nbsp;</td><td>- priority of the created task, it should be greather than or equal to <a class="el" href="sst_8h.html#27923baebde1307c6486e8b481b9c61d">SST_MIN_TASK_PRIO</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>task</em>&nbsp;</td><td>- pointer to a task function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ev_queue</em>&nbsp;</td><td>- pointer to an event queue which will be associated with created task, this parameter is available only when the macro <a class="el" href="sst__base__def_8h.html#91b4bef2cc2f07f610a99c275134b3e6">SST_MAX_EV_QUEUE_LEN</a> is defined to value 0 (zero) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ID of created task or invalid ID (<a class="el" href="sst__intern_8h.html#3019c51191b97314f308c2d10ebe894d">SST_BAD_TASK_ID</a>) if task cannot be created (e.g. no available TCBs because of too small <a class="el" href="sst__base__def_8h.html#21e4312065735a4693073bd3fd408e43">SST_MAX_NO_OF_TASKS</a>). </dd></dl>

</div>
</div><p>
<a class="anchor" name="3972841e709c07f625043a17d3cc5d25"></a><!-- doxytag: member="sst.h::SST_OnIdle" ref="3972841e709c07f625043a17d3cc5d25" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SST_OnIdle           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A user supplied callback used for signaling the scheduler idle time. 
<p>
This function will be called by the SST scheduler when there is no tasks ready to run.<br>
 Usually this function will lower power consumption and inhibit CPU until next interrupt by switching microcontroller to "sleep" mode.<br>
 Keep in mind that there is no "wake up" phase - after receiving interrupt the microcontroller should automatically (or by executing special code in ISR) switch to normal mode. 
</div>
</div><p>
<a class="anchor" name="4f8fd4af0f0cb0e90e17c8fa1b3f8470"></a><!-- doxytag: member="sst.h::SST_PostEvent" ref="4f8fd4af0f0cb0e90e17c8fa1b3f8470" args="(SST_TaskID_T id, SST_Signal_T sig, SST_Param_T par)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SST_PostEvent           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a>&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sst__event_8h.html#2939852a573c268f48f6e2c96661bb33">SST_Signal_T</a>&nbsp;</td>
          <td class="paramname"> <em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sst__event_8h.html#ffbb29bec13bac6dc2f1d63fc41ed290">SST_Param_T</a>&nbsp;</td>
          <td class="paramname"> <em>par</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends an avent to the SST task. 
<p>
This is a main communication mechanism between tasks.<br>
 It is also the only method to schedule given task to run.<br>
 When code is compiled with macro SST_USE_SIGNAL_MASK defined to nonzero value then id parameter has a special meaning. In such case when it has value of <a class="el" href="sst__intern_8h.html#ae26507a3b774917892a5c2e101274f4">SST_TASK_BROADCAST_ID</a> then event will be posted to all task with signal mask which matches with signal value. Matching is performed by bitwise <code>AND</code>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>- ID of the event receiver task(s) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sig</em>&nbsp;</td><td>- signal value for event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>par</em>&nbsp;</td><td>- parameter value for event </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><code>true</code> if event was send sucessfully or <code>false</code> if not (e.g. there is no space left in the receiver event queue) </dd></dl>

</div>
</div><p>
<a class="anchor" name="a7c965b5658a7cb09c992c57ad30e640"></a><!-- doxytag: member="sst.h::SST_SetSignalMask" ref="a7c965b5658a7cb09c992c57ad30e640" args="(SST_TaskID_T id, SST_Signal_T signal_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SST_SetSignalMask           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a>&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sst__event_8h.html#2939852a573c268f48f6e2c96661bb33">SST_Signal_T</a>&nbsp;</td>
          <td class="paramname"> <em>signal_mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Defines signal mask for given task. 
<p>
User can assign signal mask for task. When SST_PostEvent is executed with id value equal to <a class="el" href="sst__intern_8h.html#ae26507a3b774917892a5c2e101274f4">SST_TASK_BROADCAST_ID</a> then event will be posted for each task which <code>signal_mask</code> matches with signal value. matching is performed by bitwise <code>AND</code>.<br>
 This function is available only when code is compiled with macro <code>SST_USE_SIGNAL_MASK</code> defined to nonzero value.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>- ID of the task for which signal mask will be assigned </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>signal_mask</em>&nbsp;</td><td>- value of signal mask </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="72726c8678b00d7f75771594c6a59b13"></a><!-- doxytag: member="sst.h::SST_Start" ref="72726c8678b00d7f75771594c6a59b13" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SST_Start           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A user supplied callback used for initialization. 
<p>
This function will be called by the <a class="el" href="sst_8h.html#b45b5d20c0797e108b04c8da08dcbd54">SST_Run</a> macro before it enters infinite loop.<br>
 Typically it should be used to setup IO, create SST tasks, initialize timers and interrupts. <br>
 Usually at the end user should enable interrupts by using the <a class="el" href="sst__intern_8h.html#c8d541f772823c2ef0be55d7f1930470">SST_INT_UNLOCK</a> macro. 
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Sat Dec 30 18:21:38 2006 for SST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
