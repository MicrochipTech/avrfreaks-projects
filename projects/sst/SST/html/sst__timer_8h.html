<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SST: sst_timer.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>sst_timer.h File Reference</h1>A header file for time scheduled tasks functionality of the SST. <a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="sst_8h.html">sst.h</a>&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#b080a6f975cb71d1883dd5019e673478">SST_TICKER_DECLARE</a>(_name_)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This macro is used when there is a need do declare externally visible SST ticker object of a name <em>_name_</em>.  <a href="#b080a6f975cb71d1883dd5019e673478"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#5d685a1dfdebb07b31c6e59ef0c083e9">SST_TICKER_DEFINE</a>(_name_, _size_, ticker_busy_callback, ticker_idle_callback)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This macro is used to define a SST ticker object of a name <em>_name_</em> which is capable to manage <em>_size_</em> number of timed SST tasks.  <a href="#5d685a1dfdebb07b31c6e59ef0c083e9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef SST_TimedTask_Tag&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The datatype used to carry information about time scheduled SST task.  <a href="#a99d50455a5414f9859a7ca90ffd0f6c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef SST_Ticker_Tag&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#c17a602aa76d07648a0035a426a8c45e">SST_Ticker_T</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The datatype used to carry information about time scheduled SST tasks.  <a href="#c17a602aa76d07648a0035a426a8c45e"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#37c89a616de693f19e801e6fa3576f5d">SST_MakeTimedTask</a> (<a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a> task_id, <a class="el" href="sst__base__def_8h.html#24d4221cdd204d79e5229dfa493e0159">CPU_Base_T</a> period, bool enabled, <a class="el" href="sst__timer_8h.html#c17a602aa76d07648a0035a426a8c45e">SST_Ticker_T</a> *ticker)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Makes a SST task time schedulable.  <a href="#37c89a616de693f19e801e6fa3576f5d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#06dd90bcbbab8e53d5b9a4117d2b25f5">SST_ManageTimedTask</a> (<a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> *ttask, bool enabled)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allows to enable or disable time schedulable SST task.  <a href="#06dd90bcbbab8e53d5b9a4117d2b25f5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#7ed6277feadb58c325bcc77a616f6c66">SST_ScheduleTimedTask</a> (<a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> *ttask, <a class="el" href="sst__base__def_8h.html#24d4221cdd204d79e5229dfa493e0159">CPU_Base_T</a> delay)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schedules execution of the time schedulable SST task after delay time.  <a href="#7ed6277feadb58c325bcc77a616f6c66"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sst__timer_8h.html#6bd77ded2989304492acc6615c733da5">SST_TimerTick</a> (<a class="el" href="sst__timer_8h.html#c17a602aa76d07648a0035a426a8c45e">SST_Ticker_T</a> *ticker)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A main function used for drive time schedulable tasks.  <a href="#6bd77ded2989304492acc6615c733da5"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A header file for time scheduled tasks functionality of the SST. 
<p>
Requires <code><a class="el" href="sst_8h.html">sst.h</a></code> (from sst folder) headers. <hr><h2>Define Documentation</h2>
<a class="anchor" name="b080a6f975cb71d1883dd5019e673478"></a><!-- doxytag: member="sst_timer.h::SST_TICKER_DECLARE" ref="b080a6f975cb71d1883dd5019e673478" args="(_name_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SST_TICKER_DECLARE          </td>
          <td>(</td>
          <td class="paramtype">_name_&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This macro is used when there is a need do declare externally visible SST ticker object of a name <em>_name_</em>. 
<p>
This is only declaration (extern) and somewhere in C file it is needed a definition by use of <a class="el" href="sst__timer_8h.html#5d685a1dfdebb07b31c6e59ef0c083e9">SST_TICKER_DEFINE</a>. 
</div>
</div><p>
<a class="anchor" name="5d685a1dfdebb07b31c6e59ef0c083e9"></a><!-- doxytag: member="sst_timer.h::SST_TICKER_DEFINE" ref="5d685a1dfdebb07b31c6e59ef0c083e9" args="(_name_, _size_, ticker_busy_callback, ticker_idle_callback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SST_TICKER_DEFINE          </td>
          <td>(</td>
          <td class="paramtype">_name_,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_size_,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ticker_busy_callback,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ticker_idle_callback&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This macro is used to define a SST ticker object of a name <em>_name_</em> which is capable to manage <em>_size_</em> number of timed SST tasks. 
<p>
This macro declares object which is used internally by SST API and thhis object should be used only as a parameter to API functions.<br>
 This macro will have different syntax when compiled when <a class="el" href="sst__base__def_8h.html#ea8c167e52967cbab830f699100c0f5f">SST_USE_LAZY_TIMER</a> macro is defined to nonzero value.<br>
 Setting the callback function pointer to NULL value will result in blocking call to it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>_name_</em>&nbsp;</td><td>- name of the created ticker object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>_size_</em>&nbsp;</td><td>- max number of timed tasks associated with ticker object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ticker_busy_callback</em>&nbsp;</td><td>- pointer to callback function executed when ticker is activated </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ticker_idle_callback</em>&nbsp;</td><td>- pointer to callback function executed when ticker is not active (no timed tasks enabled) </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="c17a602aa76d07648a0035a426a8c45e"></a><!-- doxytag: member="sst_timer.h::SST_Ticker_T" ref="c17a602aa76d07648a0035a426a8c45e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sst__timer_8h.html#c17a602aa76d07648a0035a426a8c45e">SST_Ticker_T</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The datatype used to carry information about time scheduled SST tasks. 
<p>
This type (fields of structure) is never directly used by user. The API uses it internally and user is obliged to only pass pointers to object of this type (e.g. reschedule it by <a class="el" href="sst__timer_8h.html#7ed6277feadb58c325bcc77a616f6c66">SST_ScheduleTimedTask</a>). 
</div>
</div><p>
<a class="anchor" name="a99d50455a5414f9859a7ca90ffd0f6c"></a><!-- doxytag: member="sst_timer.h::SST_TimedTask_T" ref="a99d50455a5414f9859a7ca90ffd0f6c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The datatype used to carry information about time scheduled SST task. 
<p>
If given task is time schedulable by SST ticker then some additional information have to be stored for such task. The SST API uses this type to do that.<br>
 This type (fields of structure) is never directly used by user. The API uses it internally and user is obliged to keep only pointers to object of this type if there is a need to manipulate given task (e.g. reschedule it by <a class="el" href="sst__timer_8h.html#7ed6277feadb58c325bcc77a616f6c66">SST_ScheduleTimedTask</a>). 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="37c89a616de693f19e801e6fa3576f5d"></a><!-- doxytag: member="sst_timer.h::SST_MakeTimedTask" ref="37c89a616de693f19e801e6fa3576f5d" args="(SST_TaskID_T task_id, CPU_Base_T period, bool enabled, SST_Ticker_T *ticker)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> * SST_MakeTimedTask           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sst__intern_8h.html#1ea52fd8fe6e7118999e3c04f3753b2b">SST_TaskID_T</a>&nbsp;</td>
          <td class="paramname"> <em>task_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sst__base__def_8h.html#24d4221cdd204d79e5229dfa493e0159">CPU_Base_T</a>&nbsp;</td>
          <td class="paramname"> <em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sst__timer_8h.html#c17a602aa76d07648a0035a426a8c45e">SST_Ticker_T</a> *&nbsp;</td>
          <td class="paramname"> <em>ticker</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Makes a SST task time schedulable. 
<p>
<dl class="warning" compact><dt><b>Warning:</b></dt><dd>Function does not check if there is available slot in the ticker object.<br>
</dd></dl>
The value returmed by this function is only needed (should be preserved) if there is planned some manipulation of given task e.g. by the <a class="el" href="sst__timer_8h.html#06dd90bcbbab8e53d5b9a4117d2b25f5">SST_ManageTimedTask</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>task_id</em>&nbsp;</td><td>- an ID of the SST task (created by <a class="el" href="sst_8h.html#573abf104045f1163f028bc02f445ba1">SST_CreateTask</a>) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>period</em>&nbsp;</td><td>- a period if task is periodic or <code>0</code> if task is "one shot" schedulable, for periodic task the time unit is in ticker "ticks" see <a class="el" href="sst__timer_8h.html#6bd77ded2989304492acc6615c733da5">SST_TimerTick</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>enabled</em>&nbsp;</td><td>- determines if given task should be initially enabled for use by ticker </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ticker</em>&nbsp;</td><td>- pointer to SST ticker object, defined by <a class="el" href="sst__timer_8h.html#5d685a1dfdebb07b31c6e59ef0c083e9">SST_TICKER_DEFINE</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>pointer to the <a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> type </dd></dl>

</div>
</div><p>
<a class="anchor" name="06dd90bcbbab8e53d5b9a4117d2b25f5"></a><!-- doxytag: member="sst_timer.h::SST_ManageTimedTask" ref="06dd90bcbbab8e53d5b9a4117d2b25f5" args="(SST_TimedTask_T *ttask, bool enabled)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SST_ManageTimedTask           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> *&nbsp;</td>
          <td class="paramname"> <em>ttask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>enabled</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allows to enable or disable time schedulable SST task. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ttask</em>&nbsp;</td><td>- a pointer to the <a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> type as returned by the <a class="el" href="sst__timer_8h.html#37c89a616de693f19e801e6fa3576f5d">SST_MakeTimedTask</a> function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>enabled</em>&nbsp;</td><td>- true if task should be enabled, false otherwise </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="7ed6277feadb58c325bcc77a616f6c66"></a><!-- doxytag: member="sst_timer.h::SST_ScheduleTimedTask" ref="7ed6277feadb58c325bcc77a616f6c66" args="(SST_TimedTask_T *ttask, CPU_Base_T delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SST_ScheduleTimedTask           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> *&nbsp;</td>
          <td class="paramname"> <em>ttask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sst__base__def_8h.html#24d4221cdd204d79e5229dfa493e0159">CPU_Base_T</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Schedules execution of the time schedulable SST task after delay time. 
<p>
Even if the timed task was previously disabled it will be enabled and its timer will start counting.<br>
 Call to this function will reload timer associated with this task. It means that if for given task there was 2 "ticks" left to schedule then after the call it will be <code>delay</code> "ticks".<br>
 If task was created as periodic (the <code>period</code> parameter for <a class="el" href="sst__timer_8h.html#37c89a616de693f19e801e6fa3576f5d">SST_MakeTimedTask</a> was not 0) then this function will start periodic scheduling (after <code>delay</code>) of this task every <code>period</code>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ttask</em>&nbsp;</td><td>- a pointer to the <a class="el" href="sst__timer_8h.html#a99d50455a5414f9859a7ca90ffd0f6c">SST_TimedTask_T</a> type as returned by the <a class="el" href="sst__timer_8h.html#37c89a616de693f19e801e6fa3576f5d">SST_MakeTimedTask</a> function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delay</em>&nbsp;</td><td>- time after which given task will be executed the time unit is in ticker "ticks" see <a class="el" href="sst__timer_8h.html#6bd77ded2989304492acc6615c733da5">SST_TimerTick</a> </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="6bd77ded2989304492acc6615c733da5"></a><!-- doxytag: member="sst_timer.h::SST_TimerTick" ref="6bd77ded2989304492acc6615c733da5" args="(SST_Ticker_T *ticker)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SST_TimerTick           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sst__timer_8h.html#c17a602aa76d07648a0035a426a8c45e">SST_Ticker_T</a> *&nbsp;</td>
          <td class="paramname"> <em>ticker</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A main function used for drive time schedulable tasks. 
<p>
This function should be called periodically (e.g. from timer ISR).<br>
 The period between calls is a time unit for other API functions, e.g. if <code>SST_TimerTick</code> will be called every 10 ms then SST timed task prepared with call to <a class="el" href="sst__timer_8h.html#37c89a616de693f19e801e6fa3576f5d">SST_MakeTimedTask</a> function and with parameter period equal to 10 will be executed every 100 ms.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ticker</em>&nbsp;</td><td>- pointer to SST ticker object, defined by <a class="el" href="sst__timer_8h.html#5d685a1dfdebb07b31c6e59ef0c083e9">SST_TICKER_DEFINE</a> </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Sat Dec 30 18:21:39 2006 for SST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
