# Pwm dimmer with atmega8

Uploaded by admin on 2013-09-13 06:55:00 (rating 0 out of 5)

## Summary

/***************************************************** This program was produced by the CodeWizardAVR V2.05.3 Standard Automatic Program Generator Â© Copyright 1998-2011 Pavel Haiduc, HP InfoTech s.r.l. Project : Version : Date : 06/18/2013 Author : dell Company : dell Comments: behnia behboodi [behboodi\_electronic@yahoo.com](mailto:behboodi_electronic@yahoo.com) Chip type : ATmega16A Program type : Application AVR Core Clock frequency: 8.000000 MHz Memory model : Small External RAM size : 0 Data Stack size : 256 *****************************************************/ #include #include // Declare your global variables here void main(void) {unsigned char segment[10]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F}; char i=0; // Declare your local variables here // Input/Output Ports initialization // Port A initialization // Func7=In Func6=In Func5=In Func4=In Func3=In Func2=In Func1=In Func0=In // State7=T State6=T State5=T State4=T State3=T State2=T State1=T State0=T PORTA=0x00; DDRA=0x00; // Port B initialization // Func7=In Func6=In Func5=In Func4=In Func3=In Func2=In Func1=In Func0=In // State7=T State6=T State5=T State4=T State3=T State2=T State1=T State0=T PORTB=0x00; DDRB=0x04; // Port C initialization // Func7=In Func6=Out Func5=Out Func4=Out Func3=Out Func2=Out Func1=Out Func0=Out // State7=T State6=0 State5=0 State4=0 State3=0 State2=0 State1=0 State0=0 PORTC=0x00; DDRC=0x00; // Port D initialization // Func7=Out Func6=In Func5=In Func4=In Func3=In Func2=In Func1=In Func0=In // State7=0 State6=T State5=T State4=T State3=T State2=T State1=T State0=T PORTD=0x3f; DDRD=0xff; // Timer/Counter 0 initialization // Clock source: System Clock // Clock value: Timer 0 Stopped // Mode: Normal top=0xFF // OC0 output: Disconnected TCCR0=0x00; TCNT0=0x00; OCR0=0x00; // Timer/Counter 1 initialization // Clock source: System Clock // Clock value: Timer1 Stopped // Mode: Normal top=0xFFFF // OC1A output: Discon. // OC1B output: Discon. // Noise Canceler: Off // Input Capture on Falling Edge // Timer1 Overflow Interrupt: Off // Input Capture Interrupt: Off // Compare A Match Interrupt: Off // Compare B Match Interrupt: Off TCCR1A=0x00; TCCR1B=0x00; TCNT1H=0x00; TCNT1L=0x00; ICR1H=0x00; ICR1L=0x00; OCR1AH=0x00; OCR1AL=0x00; OCR1BH=0x00; OCR1BL=0x00; // Timer/Counter 2 initialization // Clock source: System Clock // Clock value: 8000.000 kHz // Mode: Fast PWM top=0xFF // OC2 output: Non-Inverted PWM ASSR=0x00; TCCR2=0x6a; TCNT2=0x00; //OCR2=0x00; // External Interrupt(s) initialization // INT0: Off // INT1: Off // INT2: Off MCUCR=0x00; MCUCSR=0x00; // Timer(s)/Counter(s) Interrupt(s) initialization TIMSK=0x00; // USART initialization // USART disabled UCSRB=0x00; // Analog Comparator initialization // Analog Comparator: Off // Analog Comparator Input Capture by Timer/Counter 1: Off ACSR=0x80; SFIOR=0x00; // ADC initialization // ADC disabled ADCSRA=0x00; // SPI initialization // SPI disabled SPCR=0x00; // TWI initialization // TWI disabled TWCR=0x00; while (1) {if(PINB.0==1) { OCR2+=28; i++; PORTD=segment[i]; delay\_ms(50); PORTB.2=1; delay\_ms(50); PORTB.2=0; } if(PINB.1==1) { OCR2-=28; i--; PORTD=segment[i]; delay\_ms(50); PORTB.2=1; delay\_ms(50); PORTB.2=0; } if(i&gt;=10) { PORTD=0x3f; i=0; OCR2=0; } // Place your code here } }

## Compilers

- CodeVisionAVR-Standard

## Tags

- Part-specific Lib.functions
- CodeVisionAVR-Standard
