# Learning IR remote decoder

Uploaded by jpka__ on 2013-12-28 08:29:00 (rating 5 out of 5)

## Summary

Level: Novice to middle. OS: Linux/Ubuntu used for compiling/programming, but Windows should work too. Goals: Very fast to build; very cheap; uses widely available hardware with worldwide shipping from online shops; universal; reliable; open source. Can't do: IR transmit (currently); rs232 interaction; pet a cat. Added 12/28/2013: Some more things: 1. It is intended to switch a load, rather than host/PC interaction as in most other IR projects. 2. For those, who, like i am, wish to get cheapest possible solution: To find correct board for it at online shops, please see photos and ensure your board will match (don't forget then to desolder USB conn. and some other parts as on photos). Other AVR USBASP boards will work, but you need to reverse engineer it for attach TSOP4838 yourself. Search by something like 'USBASP AVR' then carefully select by photo picture. 3. It is intended for home, office, or project use; not for industrial use. 4. Almost any SSR relay can be used. 5. As i was mentioned, program's artificial intelligence not precisely correct in part of comparing very first bit (preamble) of IR command, because its length may vary and should be dropped always. (TODO) But currently works fine for me. 6. The universal behaviour (any IR standard support) is possible by taking more space in EEPROM to store command, than minimum possible. (in fact, program just saves pulse/pause lengths). But you may modify code and save EEPROM / store more commands it it, for some particular IR standards. This program provides standalone IR remote learning and then decoding functionality. It works with common TSOP4838 or any other receiver. Program uses 1/16384 s time grain, to make it 'compatible' with LIRC databases when need. Software not stuck on any proprietary IR encoding system and should work with any IR protocol. However you should select proper receiver (38 / 56 kHz ... etc). Or even both in parallel. Code optimized for power consumption (uses sleep when awaiting for IR / button command). Ebay's USBASP v2.0 "LC Tech / LCSOFT" blue 44x19 mm board used as 'eval board' because it is cheapest possible ready-to-use board (cheaper than any other complete AVR board), and can be programmed using another same board. Note, for use as IR transmitter, you need to disconnect (cut) trace between pins 13 & 32, it is under IC body. Hardware also includes pushbutton (in parallel to TSOP4838, wired "OR" to save a pin and an interrupt). Connect it all to pin 32. Hardware also uses some loads like LED/relay(s). Connect load0 to pin 25, it connected to JP3 at LCSOFT USBASP board. Short pins 2 & 3 (short pin 2 to gnd) to set on/off mode switching of load0 by two different remote commands. Unconnect pin 2 to set toggle mode switching using one remote command. IR Transmitting also possible, and pin and HW Timer reserved and tested, but not done yet. The quantity of remembered commands is depend on EEPROM size and two commands can be used in ATmega8 (512 bytes of EEPROM). To program board, short (permamently) JP2, and cut wire #4 in 10-pin cable. Cutting wire not damages programming cable, it will work as before on other devices. Connect board to same but unmodified programmer board and use: sudo avrdude -p m8 -c usbasp -U flash:w:irlearn.hex Photos and most up-to-date code can be found here <http://bdyssh.ru/?p=1911>

## Compilers

- avra

## Tags

- Complete code with HW
- avra
