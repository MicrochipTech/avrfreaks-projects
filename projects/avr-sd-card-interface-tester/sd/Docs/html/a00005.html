<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AVR SD Interface: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>main.c File Reference</h1><code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;avr/interrupt.h&gt;</code><br>
<code>#include &lt;util/delay.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &quot;<a class="el" href="a00029.html">spi.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00025.html">sci.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00031.html">terminal.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00027.html">sd.h</a>&quot;</code><br>
<code>#include &quot;utils.h&quot;</code><br>

<p>
<div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dynsection">
<p><center><img src="a00037.png" border="0" usemap="#main.c_map" alt=""></center>
<map name="main.c_map">
<area shape="rect" id="node17" href="a00013.html" title="SPI interface header." alt="" coords="707,83,757,112"><area shape="rect" id="node19" href="a00009.html" title="SCI/UART interface." alt="" coords="781,83,832,112"><area shape="rect" id="node21" href="a00015.html" title="Terminal interface header." alt="" coords="499,83,587,112"><area shape="rect" id="node27" href="a00011.html" title="SD SPI interface header." alt="" coords="907,83,955,112"><area shape="rect" id="node29" href="a00033.html" title="utils.h" alt="" coords="979,83,1040,112"><area shape="rect" id="node23" href="a00004.html" title="Command system header." alt="" coords="499,160,597,189"></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d09d45a0a1963b6c0086dd654e898d8a"></a><!-- doxytag: member="main.c::Interrupts_Disable" ref="d09d45a0a1963b6c0086dd654e898d8a" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>Interrupts_Disable</b>()&nbsp;&nbsp;&nbsp;cli()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="16fdde8e7d29aa736205805da9f6d845"></a><!-- doxytag: member="main.c::Interrupts_Enable" ref="16fdde8e7d29aa736205805da9f6d845" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>Interrupts_Enable</b>()&nbsp;&nbsp;&nbsp;sei()</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#56539e5c1d92ebb5cdab1cdd0d27ff18">get</a> (char *args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data off the SPI line.  <a href="#56539e5c1d92ebb5cdab1cdd0d27ff18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#54cadc5cb83c60f7beb62ba39b46a29b">read</a> (char *args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a block of data from the SD card.  <a href="#54cadc5cb83c60f7beb62ba39b46a29b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#8b401db25875269a5bdaaef390c62b12">write</a> (char *args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write some text to the SD card.  <a href="#8b401db25875269a5bdaaef390c62b12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#70b57a4e6258f16c5216c2b2aeba20e9">erase</a> (char *args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase a block of data on the SD card.  <a href="#70b57a4e6258f16c5216c2b2aeba20e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#b358f967cbbd57b21910d1124eec7534">scan</a> (char *args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scans through the SD card looking for non-blank sections.  <a href="#b358f967cbbd57b21910d1124eec7534"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#0a4ce12276564eb224e3c4b025e3835e">sdinit</a> (char *args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the SD card.  <a href="#0a4ce12276564eb224e3c4b025e3835e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#f2d813efb59f6d81f5fc3d757dd3c3a7">help</a> (char *args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prints out a list of supported commands.  <a href="#f2d813efb59f6d81f5fc3d757dd3c3a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="main.c::main" ref="840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main. <br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="a00004.html#8f79b9a450e3706337eb776f079be727">CommandList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>cmdList</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0b8957235132e3b5fd259873eaeec595"></a><!-- doxytag: member="main.c::cmdLength" ref="0b8957235132e3b5fd259873eaeec595" args="" -->
static const uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>cmdLength</b> = sizeof(cmdList)/sizeof(<a class="el" href="a00001.html">CommandDef</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="225ab49c6362bf9b5f142fdcbe53b9a7"></a><!-- doxytag: member="main.c::welcomeMessage" ref="225ab49c6362bf9b5f142fdcbe53b9a7" args="" -->
static const char *const&nbsp;</td><td class="memItemRight" valign="bottom"><b>welcomeMessage</b> = &quot;\nSD Card Tester v0.2.0&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="eb94adf3c5d8b90e1cd759bf298a021c"></a><!-- doxytag: member="main.c::promptString" ref="eb94adf3c5d8b90e1cd759bf298a021c" args="" -->
static const char *const&nbsp;</td><td class="memItemRight" valign="bottom"><b>promptString</b> = &quot;&gt; &quot;</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="70b57a4e6258f16c5216c2b2aeba20e9"></a><!-- doxytag: member="main.c::erase" ref="70b57a4e6258f16c5216c2b2aeba20e9" args="(char *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t erase           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>args</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase a block of data on the SD card. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>a space seperated string containing the start address followed by the length (both 32bit).</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if successful, 0 otherwise </dd></dl>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00005_70b57a4e6258f16c5216c2b2aeba20e9_cgraph.png" border="0" usemap="#a00005_70b57a4e6258f16c5216c2b2aeba20e9_cgraph_map" alt=""></center>
<map name="a00005_70b57a4e6258f16c5216c2b2aeba20e9_cgraph_map">
<area shape="rect" id="node3" href="a00010.html#3c2a169297f1c0eb348a950ce0288687" title="Erases a block of data from the SD card." alt="" coords="116,136,236,165"><area shape="rect" id="node28" href="a00014.html#28e12efa4332534b690c1335fea11889" title="Gets a line of text from stdin." alt="" coords="116,189,236,219"><area shape="rect" id="node5" href="a00010.html#d702de6e3d8967fc351bf7bab00b1d41" title="Decodes the R1 response type." alt="" coords="301,5,419,35"><area shape="rect" id="node7" href="a00010.html#dc0158e94a600dc3b63be4d83c561fb3" title="Reads a response from the SD card." alt="" coords="291,59,429,88"><area shape="rect" id="node9" href="a00012.html#05039575653a077fb25a28c31d583243" title="Deassert CS." alt="" coords="500,107,585,136"><area shape="rect" id="node11" href="a00012.html#8ddc120b2a7fc96d17e0bd9f157a94eb" title="Assert CS." alt="" coords="501,160,584,189"><area shape="rect" id="node13" href="a00012.html#a14a3a4150662024315e78864403ff5f" title="Tx/Rx a byte." alt="" coords="651,267,755,296"><area shape="rect" id="node15" href="a00010.html#e6f6814ebced9e1eccdce5dbece62cd0" title="Sends a command to the card." alt="" coords="287,213,433,243"><area shape="rect" id="node17" href="a00010.html#2b9a7db31f5fb14b84ce4297aba9d99b" title="A simple CRC7 calculation." alt="" coords="500,267,585,296"><area shape="rect" id="node19" href="a00012.html#a71812ceda81f6abdee26dda53868fdd" title="Send a block of data over the SPI." alt="" coords="484,213,601,243"></map>
</div>

</div>
</div><p>
<a class="anchor" name="56539e5c1d92ebb5cdab1cdd0d27ff18"></a><!-- doxytag: member="main.c::get" ref="56539e5c1d92ebb5cdab1cdd0d27ff18" args="(char *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t get           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>args</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read data off the SPI line. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>a space separated string containing the number of bytes to read off, limited to 256. </td></tr>
  </table>
</dl>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00005_56539e5c1d92ebb5cdab1cdd0d27ff18_cgraph.png" border="0" usemap="#a00005_56539e5c1d92ebb5cdab1cdd0d27ff18_cgraph_map" alt=""></center>
<map name="a00005_56539e5c1d92ebb5cdab1cdd0d27ff18_cgraph_map">
<area shape="rect" id="node3" href="a00012.html#05039575653a077fb25a28c31d583243" title="Deassert CS." alt="" coords="108,5,193,35"><area shape="rect" id="node5" href="a00012.html#8ddc120b2a7fc96d17e0bd9f157a94eb" title="Assert CS." alt="" coords="109,59,192,88"><area shape="rect" id="node7" href="a00012.html#a14a3a4150662024315e78864403ff5f" title="Tx/Rx a byte." alt="" coords="99,112,203,141"></map>
</div>

</div>
</div><p>
<a class="anchor" name="f2d813efb59f6d81f5fc3d757dd3c3a7"></a><!-- doxytag: member="main.c::help" ref="f2d813efb59f6d81f5fc3d757dd3c3a7" args="(char *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t help           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>args</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prints out a list of supported commands. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>(not used)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1, always </dd></dl>

</div>
</div><p>
<a class="anchor" name="54cadc5cb83c60f7beb62ba39b46a29b"></a><!-- doxytag: member="main.c::read" ref="54cadc5cb83c60f7beb62ba39b46a29b" args="(char *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t read           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>args</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read a block of data from the SD card. 
<p>
Reads a block of data and prints it using the print_block function in <a class="el" href="a00016.html" title="Random, useful utilities.">utils.c</a><p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="a00016.html#2bd9099a2df3109fa801b238d5d30895" title="Prints a block of hex in a pretty way.">print_block</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>a space seperated string containing an address (32bit) followed by a length (16bit).</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1, always </dd></dl>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00005_54cadc5cb83c60f7beb62ba39b46a29b_cgraph.png" border="0" usemap="#a00005_54cadc5cb83c60f7beb62ba39b46a29b_cgraph_map" alt=""></center>
<map name="a00005_54cadc5cb83c60f7beb62ba39b46a29b_cgraph_map">
<area shape="rect" id="node3" href="a00016.html#2bd9099a2df3109fa801b238d5d30895" title="Prints a block of hex in a pretty way." alt="" coords="120,69,213,98"><area shape="rect" id="node5" href="a00010.html#d536c2272a315395f9e4cf1f7e153620" title="Read a block of data from the SD card." alt="" coords="108,122,225,152"><area shape="rect" id="node7" href="a00010.html#d702de6e3d8967fc351bf7bab00b1d41" title="Decodes the R1 response type." alt="" coords="291,42,408,72"><area shape="rect" id="node9" href="a00010.html#dc0158e94a600dc3b63be4d83c561fb3" title="Reads a response from the SD card." alt="" coords="280,149,419,178"><area shape="rect" id="node17" href="a00010.html#c9fb3c9ff54cfbffe7c4babe9d3bc6ee" title="Reads a data response of a given length." alt="" coords="292,96,407,125"><area shape="rect" id="node24" href="a00010.html#e6f6814ebced9e1eccdce5dbece62cd0" title="Sends a command to the card." alt="" coords="276,228,423,257"><area shape="rect" id="node11" href="a00012.html#05039575653a077fb25a28c31d583243" title="Deassert CS." alt="" coords="507,96,592,125"><area shape="rect" id="node13" href="a00012.html#8ddc120b2a7fc96d17e0bd9f157a94eb" title="Assert CS." alt="" coords="508,149,591,178"><area shape="rect" id="node15" href="a00012.html#a14a3a4150662024315e78864403ff5f" title="Tx/Rx a byte." alt="" coords="675,228,779,257"><area shape="rect" id="node19" href="a00010.html#e03df3cb7531a9d176313802115f937a" title="Decodes the data error response." alt="" coords="473,42,625,72"><area shape="rect" id="node26" href="a00010.html#2b9a7db31f5fb14b84ce4297aba9d99b" title="A simple CRC7 calculation." alt="" coords="507,306,592,336"><area shape="rect" id="node28" href="a00012.html#a71812ceda81f6abdee26dda53868fdd" title="Send a block of data over the SPI." alt="" coords="491,253,608,282"></map>
</div>

</div>
</div><p>
<a class="anchor" name="b358f967cbbd57b21910d1124eec7534"></a><!-- doxytag: member="main.c::scan" ref="b358f967cbbd57b21910d1124eec7534" args="(char *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t scan           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>args</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Scans through the SD card looking for non-blank sections. 
<p>
Scans across the SD card in 32-byte blocks and prints out ones containing at least one non FF value. Formatted using <a class="el" href="a00016.html#2bd9099a2df3109fa801b238d5d30895" title="Prints a block of hex in a pretty way.">print_block()</a> in <a class="el" href="a00016.html" title="Random, useful utilities.">utils.c</a>.<p>
Contiguous blocks are printed as such. Any breaks are signaled with an extra newline between blocks.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="a00016.html#2bd9099a2df3109fa801b238d5d30895" title="Prints a block of hex in a pretty way.">print_block</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>a space seperated string containing an address followed by a length.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1, always </dd></dl>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00005_b358f967cbbd57b21910d1124eec7534_cgraph.png" border="0" usemap="#a00005_b358f967cbbd57b21910d1124eec7534_cgraph_map" alt=""></center>
<map name="a00005_b358f967cbbd57b21910d1124eec7534_cgraph_map">
<area shape="rect" id="node3" href="a00016.html#2bd9099a2df3109fa801b238d5d30895" title="Prints a block of hex in a pretty way." alt="" coords="120,69,213,98"><area shape="rect" id="node5" href="a00010.html#d536c2272a315395f9e4cf1f7e153620" title="Read a block of data from the SD card." alt="" coords="108,122,225,152"><area shape="rect" id="node7" href="a00010.html#d702de6e3d8967fc351bf7bab00b1d41" title="Decodes the R1 response type." alt="" coords="291,42,408,72"><area shape="rect" id="node9" href="a00010.html#dc0158e94a600dc3b63be4d83c561fb3" title="Reads a response from the SD card." alt="" coords="280,149,419,178"><area shape="rect" id="node17" href="a00010.html#c9fb3c9ff54cfbffe7c4babe9d3bc6ee" title="Reads a data response of a given length." alt="" coords="292,96,407,125"><area shape="rect" id="node24" href="a00010.html#e6f6814ebced9e1eccdce5dbece62cd0" title="Sends a command to the card." alt="" coords="276,228,423,257"><area shape="rect" id="node11" href="a00012.html#05039575653a077fb25a28c31d583243" title="Deassert CS." alt="" coords="507,96,592,125"><area shape="rect" id="node13" href="a00012.html#8ddc120b2a7fc96d17e0bd9f157a94eb" title="Assert CS." alt="" coords="508,149,591,178"><area shape="rect" id="node15" href="a00012.html#a14a3a4150662024315e78864403ff5f" title="Tx/Rx a byte." alt="" coords="675,228,779,257"><area shape="rect" id="node19" href="a00010.html#e03df3cb7531a9d176313802115f937a" title="Decodes the data error response." alt="" coords="473,42,625,72"><area shape="rect" id="node26" href="a00010.html#2b9a7db31f5fb14b84ce4297aba9d99b" title="A simple CRC7 calculation." alt="" coords="507,306,592,336"><area shape="rect" id="node28" href="a00012.html#a71812ceda81f6abdee26dda53868fdd" title="Send a block of data over the SPI." alt="" coords="491,253,608,282"></map>
</div>

</div>
</div><p>
<a class="anchor" name="0a4ce12276564eb224e3c4b025e3835e"></a><!-- doxytag: member="main.c::sdinit" ref="0a4ce12276564eb224e3c4b025e3835e" args="(char *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdinit           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>args</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the SD card. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>is not used </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1, always </dd></dl>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00005_0a4ce12276564eb224e3c4b025e3835e_cgraph.png" border="0" usemap="#a00005_0a4ce12276564eb224e3c4b025e3835e_cgraph_map" alt=""></center>
<map name="a00005_0a4ce12276564eb224e3c4b025e3835e_cgraph_map">
<area shape="rect" id="node3" href="a00010.html#a7a6e00a7867366345f8ba72c5fa58c5" title="Initialize the SD card." alt="" coords="112,222,181,252"><area shape="rect" id="node5" href="a00016.html#db1638ef5bc4018185fa1d9e5c68097d" title="Prints a bunch of hex." alt="" coords="259,41,341,70"><area shape="rect" id="node7" href="a00010.html#6adf6824b8f4566ddd4d3965c6e86d6e" title="Checks for the presence of a card." alt="" coords="229,145,371,174"><area shape="rect" id="node9" href="a00010.html#dc0158e94a600dc3b63be4d83c561fb3" title="Reads a response from the SD card." alt="" coords="424,194,563,224"><area shape="rect" id="node11" href="a00012.html#05039575653a077fb25a28c31d583243" title="Deassert CS." alt="" coords="651,248,736,277"><area shape="rect" id="node17" href="a00010.html#e6f6814ebced9e1eccdce5dbece62cd0" title="Sends a command to the card." alt="" coords="420,93,567,122"><area shape="rect" id="node27" href="a00010.html#d702de6e3d8967fc351bf7bab00b1d41" title="Decodes the R1 response type." alt="" coords="241,401,359,430"><area shape="rect" id="node29" href="a00010.html#7a31f8cd5e4ddd7afed33f08de2c4f15" title="Clocks out on the SPI line." alt="" coords="429,378,557,408"><area shape="rect" id="node33" href="a00010.html#c9fb3c9ff54cfbffe7c4babe9d3bc6ee" title="Reads a data response of a given length." alt="" coords="436,300,551,329"><area shape="rect" id="node13" href="a00012.html#8ddc120b2a7fc96d17e0bd9f157a94eb" title="Assert CS." alt="" coords="652,194,735,224"><area shape="rect" id="node15" href="a00012.html#a14a3a4150662024315e78864403ff5f" title="Tx/Rx a byte." alt="" coords="819,142,923,172"><area shape="rect" id="node19" href="a00010.html#2b9a7db31f5fb14b84ce4297aba9d99b" title="A simple CRC7 calculation." alt="" coords="651,37,736,66"><area shape="rect" id="node21" href="a00012.html#a71812ceda81f6abdee26dda53868fdd" title="Send a block of data over the SPI." alt="" coords="635,90,752,120"><area shape="rect" id="node35" href="a00010.html#e03df3cb7531a9d176313802115f937a" title="Decodes the data error response." alt="" coords="617,301,769,330"></map>
</div>

</div>
</div><p>
<a class="anchor" name="8b401db25875269a5bdaaef390c62b12"></a><!-- doxytag: member="main.c::write" ref="8b401db25875269a5bdaaef390c62b12" args="(char *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t write           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>args</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write some text to the SD card. 
<p>
Writes a block of text to the address specified. Right now the address must be block aligned, or an error will occur.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>a space seperated string containing an address (32bit) followed by the string to write.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if successful, 0 otherwise </dd></dl>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00005_8b401db25875269a5bdaaef390c62b12_cgraph.png" border="0" usemap="#a00005_8b401db25875269a5bdaaef390c62b12_cgraph_map" alt=""></center>
<map name="a00005_8b401db25875269a5bdaaef390c62b12_cgraph_map">
<area shape="rect" id="node3" href="a00010.html#4e692b3a2d4421d0d7ff2782eac528c5" title="Writes a block of data to the SD card." alt="" coords="109,244,229,273"><area shape="rect" id="node5" href="a00010.html#519ad77971f09364599528c59e108b59" title="A simple CRC16 calculation (Xmodem)." alt="" coords="311,5,404,35"><area shape="rect" id="node7" href="a00010.html#ae571a1a29dbeeb9a79cae35d7a62de5" title="Continues a CRC16 (Xmodem) check." alt="" coords="299,59,416,88"><area shape="rect" id="node9" href="a00010.html#6ce33f8b0dfdecdd04ed9e1395c36d46" title="Decodes the R2 response type." alt="" coords="277,112,437,141"><area shape="rect" id="node11" href="a00010.html#d702de6e3d8967fc351bf7bab00b1d41" title="Decodes the R1 response type." alt="" coords="299,165,416,195"><area shape="rect" id="node13" href="a00010.html#dc0158e94a600dc3b63be4d83c561fb3" title="Reads a response from the SD card." alt="" coords="288,269,427,299"><area shape="rect" id="node15" href="a00012.html#05039575653a077fb25a28c31d583243" title="Deassert CS." alt="" coords="503,241,588,271"><area shape="rect" id="node17" href="a00012.html#8ddc120b2a7fc96d17e0bd9f157a94eb" title="Assert CS." alt="" coords="504,295,587,324"><area shape="rect" id="node19" href="a00012.html#a14a3a4150662024315e78864403ff5f" title="Tx/Rx a byte." alt="" coords="653,427,757,456"><area shape="rect" id="node21" href="a00010.html#e6f6814ebced9e1eccdce5dbece62cd0" title="Sends a command to the card." alt="" coords="284,373,431,403"><area shape="rect" id="node25" href="a00012.html#a71812ceda81f6abdee26dda53868fdd" title="Send a block of data over the SPI." alt="" coords="487,452,604,481"><area shape="rect" id="node23" href="a00010.html#2b9a7db31f5fb14b84ce4297aba9d99b" title="A simple CRC7 calculation." alt="" coords="503,348,588,377"></map>
</div>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="dacb04d9a22c0b04d1cbbe8b901b4ef6"></a><!-- doxytag: member="main.c::cmdList" ref="dacb04d9a22c0b04d1cbbe8b901b4ef6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00004.html#8f79b9a450e3706337eb776f079be727">CommandList</a> cmdList<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
  {<span class="stringliteral">"get"</span>, <span class="keyword">get</span>},
  {<span class="stringliteral">"read"</span>, <a class="code" href="a00005.html#54cadc5cb83c60f7beb62ba39b46a29b" title="Read a block of data from the SD card.">read</a>},
  {<span class="stringliteral">"write"</span>, <a class="code" href="a00005.html#8b401db25875269a5bdaaef390c62b12" title="Write some text to the SD card.">write</a>},
  {<span class="stringliteral">"erase"</span>, <a class="code" href="a00005.html#70b57a4e6258f16c5216c2b2aeba20e9" title="Erase a block of data on the SD card.">erase</a>},
  {<span class="stringliteral">"scan"</span>, <a class="code" href="a00005.html#b358f967cbbd57b21910d1124eec7534" title="Scans through the SD card looking for non-blank sections.">scan</a>},
  {<span class="stringliteral">"sdinit"</span>, <a class="code" href="a00005.html#0a4ce12276564eb224e3c4b025e3835e" title="Initialize the SD card.">sdinit</a>},
  {<span class="stringliteral">"help"</span>, <a class="code" href="a00005.html#f2d813efb59f6d81f5fc3d757dd3c3a7" title="Prints out a list of supported commands.">help</a>}
}
</pre></div>
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Mar 8 19:18:47 2009 for AVR SD Interface by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
