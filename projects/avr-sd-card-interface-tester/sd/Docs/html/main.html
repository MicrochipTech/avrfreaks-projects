<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AVR SD Interface: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>AVR SD Interface Documentation</h1>
<p>
<h3 align="center">0.2 </h3>This is the AVR SD Interface tester v0.2. It provides a serial terminal interface to execute a set of operations on the SD card. This uses avr-libc and is somewhat bloated. The intent is to create a somewhat verbose user interface that is helpful for debugging and learning.<p>
<b>Overview</b><br>
 The applicaion provides a simple terminal-like interface to the user with a small set of commands. An example session is shown below:<p>
<div class="fragment"><pre class="fragment">SD Card Tester v0.2.0
&gt; <a class="code" href="a00006.html#f2d813efb59f6d81f5fc3d757dd3c3a7" title="Prints out a list of supported commands.">help</a>
Available commands:
  <span class="keyword">get</span>
  <a class="code" href="a00006.html#54cadc5cb83c60f7beb62ba39b46a29b" title="Read a block of data from the SD card.">read</a>
  <a class="code" href="a00006.html#8b401db25875269a5bdaaef390c62b12" title="Write some text to the SD card.">write</a>
  <a class="code" href="a00006.html#70b57a4e6258f16c5216c2b2aeba20e9" title="Erase a block of data on the SD card.">erase</a>
  <a class="code" href="a00006.html#b358f967cbbd57b21910d1124eec7534" title="Scans through the SD card looking for non-blank sections.">scan</a>
  <a class="code" href="a00006.html#0a4ce12276564eb224e3c4b025e3835e" title="Initialize the SD card.">sdinit</a>
  <a class="code" href="a00006.html#f2d813efb59f6d81f5fc3d757dd3c3a7" title="Prints out a list of supported commands.">help</a>
&gt; <a class="code" href="a00006.html#0a4ce12276564eb224e3c4b025e3835e" title="Initialize the SD card.">sdinit</a>
Initializing SD Card...
Card found
CID: 02 54 4D 53 44 35 31 32 28 81 60 D2 8F 00 72 55 
CSD: 00 2D 00 32 1B 59 83 D0 FE FB 7F 80 16 40 00 AD 
&gt; <a class="code" href="a00006.html#54cadc5cb83c60f7beb62ba39b46a29b" title="Read a block of data from the SD card.">read</a> 0 0x20
addr: 00000000, size: 00000020
0x00000000:   68 69 20 74 68 65 72 65 FF FF FF FF FF FF FF FF    hi there........
0x00000010:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
&gt; <a class="code" href="a00006.html#8b401db25875269a5bdaaef390c62b12" title="Write some text to the SD card.">write</a> 0 Hello World!
addr: 00000000, size: 0000000C
&gt; <a class="code" href="a00006.html#54cadc5cb83c60f7beb62ba39b46a29b" title="Read a block of data from the SD card.">read</a> 0 0x20
addr: 00000000, size: 00000020
0x00000000:   48 65 6C 6C 6F 20 57 6F 72 6C 64 21 FF FF FF FF    Hello World!....
0x00000010:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
&gt; <a class="code" href="a00006.html#b358f967cbbd57b21910d1124eec7534" title="Scans through the SD card looking for non-blank sections.">scan</a> 0 0x1000
0x00000000:   48 65 6C 6C 6F 20 57 6F 72 6C 64 21 FF FF FF FF    Hello World!....
0x00000010:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................

0x00000800:   53 6F 6D 65 20 68 69 64 64 65 6E 20 64 61 74 61    Some hidden data
0x00000810:   2E 2E 2E FF FF FF FF FF FF FF FF FF FF FF FF FF    ................

&gt; <a class="code" href="a00006.html#70b57a4e6258f16c5216c2b2aeba20e9" title="Erase a block of data on the SD card.">erase</a> 0 0x100
Erasing addr: 00000000, size: 00000100
Type <span class="stringliteral">"yes"</span> to confirm &gt; yes
&gt; <a class="code" href="a00006.html#54cadc5cb83c60f7beb62ba39b46a29b" title="Read a block of data from the SD card.">read</a> 0 0x100
addr: 00000000, size: 00000100
0x00000000:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000010:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000020:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000030:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000040:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000050:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000060:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000070:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000080:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x00000090:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x000000A0:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x000000B0:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x000000C0:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x000000D0:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x000000E0:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
0x000000F0:   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF    ................
&gt; 
</pre></div><p>
<b>Notes about the SD card</b><br>
 This application has only been tested on a 512MB SD card. It does not support SDHC, as the addressing changes from byte-wise to block-wise. It assumes that you can do byte-wise reads from the card as well.<p>
<b>Hardware</b><br>
 The SD card must be attached to the SPI line, with the slave select (SS) line tied to the card's chip select (CS). No external pullups are required. I recommend using SparkFun's MicroSD breakout board (<a href="http://www.sparkfun.com/commerce/product_info.php?products_id=544">http://www.sparkfun.com/commerce/product_info.php?products_id=544</a>).<p>
This has only been tested on the ATmega16, but should work fine on the ATmega32. The project is expecting a 16MHz clock.<p>
<b>Author</b><br>
 Stefan Filipek<p>
<b>Date</b><br>
 March 2009 </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Mar 8 19:36:24 2009 for AVR SD Interface by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
