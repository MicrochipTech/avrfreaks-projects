;************************************************************************
;****    this code is used in the VGA monitor controller project     ****
;************************************************************************

.include "def.asm"

.org 0000
	RJMP START
	RJMP INT0_ISR


;===========================================================================
;*                          Initializations				   *
;===========================================================================

.ORG 0x0020
START:
.include "ini.asm"

;==========================================================================
;*                         Code starts here                               *
;==========================================================================
.include "com.asm"
;--------------------------------------------------------------------------
.include "exe.asm"
;==========================================================================
;*                               Functions                                *
;==========================================================================
.include "proc1.asm"
;---------------------------------------------------------------------------
.include "proc2.asm"
;---------------------------------------------------------------------------




;===========================================================================
;*			INTURRUPT SERVICE ROUTINE			   *
;===========================================================================
INT0_ISR:
	PUSH R17	
	LDI R17,0
	OUT MCUCR,R17		;DISABLE EXTERNAL SRAM
	WAIT:
	SBIS PIND,2
	RJMP WAIT	
	LDI R17,0b10000000      
	OUT MCUCR,R17		;ENABLE EXTERNAL SRAM
	POP R17
	RETI

;===========================================================================
;*				    DATA				   *
;===========================================================================
.include "dat.asm"
;/////////////////////////////////////\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;**********************		END OF PROGRAM         *********************
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\//////////////////////////////////////
