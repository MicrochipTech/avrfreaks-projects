		;hardware initializations
LDI R16,0x02
OUT SPH,R16		;SET THE STACK POINTER AT (025F)
LDI R16,0x5F
OUT SPL,R16

LDI R16,0b00000000
OUT DDRA,R16		;SET PORTA AS INPUT

LDI R16,0b00000000
OUT DDRB,R16		;SET PORTB AS INPUT

LDI R16,0b10000000      
OUT DDRC,R16		;SET PORTC AS INPUT EXCEPT PC7 
	
LDI R16,0b11010001
OUT DDRD,R16		;SET PORTD direction

LDI R16,0b01000001
OUT PORTD,R16		;SET WR\=HIGH , RD\=LOW	    

CBI PORTD,4		
SBI PORTD,4 		;clear pulse to the busy FF   

LDI R16,0b00001000      ;
OUT SFIOR,R16		;RELEASE PC7

CLI

LDI R16,0b00000000      ;DISABLE EXTERNAL SRAM   
OUT MCUCR,R16		;& set INT0 as a low level activated interrupt

LDI R16,0b01000000      
OUT GIMSK,R16		;ENABLE INT0 MASK

		;software initializations

LDI R16,0b00000000     
STS CHAR_MODE,R16	; SET CHAR MODE

LDI R16,0x00    
STS BACKCOLOR,R16	; SET BACKCOLOR=BLACK

LDI R16,0xff
STS FORECOLOR,R16	; SET FORECOLOR=white

CLR R0
STS XPOSL,R0
STS XPOSH,R0
STS YPOSL,R0
STS YPOSH,R0

LDI XL,0x40
LDI XH,0x01
LDI YL,0x40
LDI YH,0x00
STS MOUSE_XL,XL
STS MOUSE_XH,XH
STS MOUSE_YL,YL
STS MOUSE_YH,YH
LDI R16,0
STS MOUSE_STATUS,R16

CLR R16
STS TXT_XL_1,R16
STS TXT_XH_1,R16
STS TXT_YL_1,R16
STS TXT_YH_1,R16
LDI R16,LOW(640)
LDI R17,HIGH(640)
LDI R18,LOW(480)
LDI R19,HIGH(480)
STS TXT_XL_2,R16
STS TXT_XH_2,R17
STS TXT_YL_2,R18
STS TXT_YH_2,R19

;	clear screen
SBI PORTD,0		;Disable command register output
LDI R16,0b00000111
OUT DDRB,R16		;SET PORTB[2,1,0] AS OUTPUT
RCALL CLS